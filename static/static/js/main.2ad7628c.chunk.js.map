{"version":3,"sources":["components/Player/player.module.css","components/Main/components/Upload/upload.module.css","components/Main/components/Music/components/Song/song.module.css","components/Main/components/Register/register.module.css","components/Main/components/Login/login.module.css","components/Header/header.module.css","components/Main/components/Forgot/forgot.module.css","components/Player/components/SoundBadge/soundBadge.module.css","components/Main/components/Status/status.module.css","components/Player/components/Timeline/timeline.module.css","components/Player/icons.svg","components/Main/components/Music/components/Song/icons.svg","components/App/app.module.css","components/Main/components/Music/music.module.css","components/Modal/modal.module.css","components/Main/main.module.css","components/App/bg.jpg","actions/login.js","components/Header/index.jsx","actions/error.js","components/Main/components/Status/index.jsx","components/Main/components/Login/index.jsx","components/Main/components/Register/index.jsx","components/Main/components/Forgot/index.jsx","actions/player.js","components/Main/components/Music/components/Song/index.jsx","components/Main/components/Music/index.jsx","components/Main/components/Upload/index.jsx","components/Main/routes.jsx","components/Main/index.jsx","components/Player/components/Timeline/index.jsx","components/Player/components/SoundBadge/index.jsx","components/Player/index.jsx","components/Modal/index.jsx","components/App/index.jsx","reducers/login.js","reducers/player.js","reducers/error.js","reducers/root.js","store/index.js","serviceWorker.js","index.jsx"],"names":["module","exports","player","wrapper","controls","control","controlIcon","volume","volumeWrapper","volumeSlider","volumeBackground","volumeBar","upload","title","main","inputWrapper","input","submit","file","fileInput","note","filename","songEdit","track","cover","defaultCover","button","play","playIcon","content","actions","actionIcon","action","info","author","register","right","link","login","header","inner","left","logoLink","logo","navWrapper","forgot","soundBadge","titleContextContainer","truncate","status","body","item","timeline","progressWrapper","progressBackground","progressBar","timePassed","duration","__webpack_require__","p","app","background","container","modalWrapper","music","songList","modal","icon","message","token","type","payload","Header","_this","this","e","preventDefault","_this$props","props","setToken","history","window","localStorage","removeItem","push","react_default","a","createElement","className","styles","react_router_dom","to","viewBox","d","onClick","logout","React","Component","connect","store","dispatch","withRouter","process","REACT_APP_API_URL","Status","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","storage","_this2","updateStatus","interval","setInterval","clearInterval","_this3","setError","fetch","concat","method","headers","accept","content-type","then","res","json","setState","catch","error","toString","filesize","totalSpace","usedSpace","maxFileSize","errAction","Login","username","password","uuids","uuidv4","_this$uuids","_e$target","target","id","value","_this$props2","_this$state","JSON","stringify","setItem","htmlFor","placeholder","onChange","onInput","bind","Register","email","retry","test","length","uuid","ref","Forgot","requestPasswordChange","Song","i","np","setNP","pause","setPause","edit","icons","style","backgroundImage","xmlnsXlink","xlinkHref","defaultProps","nowPlaying","paused","songs","_ref","map","song","components_Song","key","Upload","artist","name","files","dataTransfer","size","authorization","x-uploaded-filename","onDrop","onDragOver","routes","path","component","components_Status","exact","components_Music","components_Upload","components_Login","components_Register","components_Forgot","Main","route","react_router","slice","Timeline","moment","format","width","SoundBadge","Player","currentTime","loop","shuffle","muted","audio","createRef","setSongs","prev","current","_this$props3","setNowPlaying","_this$props4","_this$props5","classList","contains","parentNode","r","getBoundingClientRect","v","clientY","top","height","_this$props6","Math","round","random","next","repeat","fill","components_Timeline","mute","role","changeVolume","components_SoundBadge","autoPlay","src","url","onCanPlay","update","onEnded","ended","onTimeUpdate","onVolumeChange","Modal","clearError","setTimeout","bg","components_Header","components_Main","components_Player","components_Modal","initialState","getItem","rootReducer","combineReducers","arguments","undefined","objectSpread","createStore","Boolean","location","hostname","match","ReactDOM","render","es","components_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.2ad7628c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"player\":\"player_player__35Gch\",\"wrapper\":\"player_wrapper__2pvXA\",\"controls\":\"player_controls__yrmwU\",\"control\":\"player_control__1GAJR\",\"controlIcon\":\"player_controlIcon__2enCG\",\"volume\":\"player_volume__3Swwg\",\"volumeWrapper\":\"player_volumeWrapper__1fz4y\",\"volumeSlider\":\"player_volumeSlider__1bdID\",\"volumeBackground\":\"player_volumeBackground__1nr9H\",\"volumeBar\":\"player_volumeBar__64T8Y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"upload\":\"upload_upload__2gDVd\",\"title\":\"upload_title__26joS\",\"main\":\"upload_main__QlYCT\",\"inputWrapper\":\"upload_inputWrapper__2faF0\",\"input\":\"upload_input__3HSqz\",\"submit\":\"upload_submit__3zk2_\",\"file\":\"upload_file__HK228\",\"fileInput\":\"upload_fileInput__3OG6N\",\"note\":\"upload_note__1Kiz-\",\"filename\":\"upload_filename__1sd5q\",\"songEdit\":\"upload_songEdit__39Ayy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"track\":\"song_track__RX6bx\",\"cover\":\"song_cover__1Z4fR\",\"defaultCover\":\"song_defaultCover__1Scdp\",\"button\":\"song_button__sSeHU\",\"play\":\"song_play__3MQc2\",\"playIcon\":\"song_playIcon__3QDC6\",\"content\":\"song_content__TWzaj\",\"actions\":\"song_actions__2A91g\",\"actionIcon\":\"song_actionIcon__2Lse-\",\"action\":\"song_action__Dd0CG\",\"info\":\"song_info__jIaQd\",\"title\":\"song_title__2OYyJ\",\"author\":\"song_author__2GBdg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"register\":\"register_register__3K1Qz\",\"title\":\"register_title__1qn8q\",\"main\":\"register_main__wdjIV\",\"inputWrapper\":\"register_inputWrapper__3hxjc\",\"right\":\"register_right__6B6O5\",\"input\":\"register_input__285Xz\",\"submit\":\"register_submit__pfce4\",\"link\":\"register_link__KC47u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"login_login__KNSyK\",\"title\":\"login_title__2BrJb\",\"main\":\"login_main__3gDUL\",\"inputWrapper\":\"login_inputWrapper__PxK70\",\"right\":\"login_right__2EU-W\",\"input\":\"login_input__3Z4uP\",\"submit\":\"login_submit__3z0zh\",\"link\":\"login_link__QwjVM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header_header__3w3xx\",\"inner\":\"header_inner__ueAE6\",\"left\":\"header_left__oqI23\",\"right\":\"header_right__2pdo2\",\"logoLink\":\"header_logoLink__MRkg5\",\"logo\":\"header_logo__2Sn9n\",\"navWrapper\":\"header_navWrapper__32fBU\",\"link\":\"header_link__3JPaZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"forgot\":\"forgot_forgot__6N7KH\",\"title\":\"forgot_title__3VwzE\",\"main\":\"forgot_main__3wV8l\",\"note\":\"forgot_note__1WMHf\",\"inputWrapper\":\"forgot_inputWrapper__3NOri\",\"right\":\"forgot_right__gOi91\",\"input\":\"forgot_input__2hnXW\",\"submit\":\"forgot_submit__mizzt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"soundBadge\":\"soundBadge_soundBadge__hUvOb\",\"cover\":\"soundBadge_cover__3DUfa\",\"titleContextContainer\":\"soundBadge_titleContextContainer__8tE46\",\"title\":\"soundBadge_title__3Wt33\",\"author\":\"soundBadge_author__2z1MH\",\"truncate\":\"soundBadge_truncate__3U-6n\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"status\":\"status_status__1dbQM\",\"title\":\"status_title__2RHYm\",\"body\":\"status_body__3W00t\",\"item\":\"status_item__2fj3D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"timeline\":\"timeline_timeline__3ng4V\",\"progressWrapper\":\"timeline_progressWrapper__2Mxxn\",\"progressBackground\":\"timeline_progressBackground__VsvSl\",\"progressBar\":\"timeline_progressBar__2sPc6\",\"timePassed\":\"timeline_timePassed__pmNyr\",\"duration\":\"timeline_duration__1I6eB\"};","module.exports = __webpack_public_path__ + \"static/media/icons.174b8195.svg\";","module.exports = __webpack_public_path__ + \"static/media/icons.6b9d14e4.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"app_app__12nIj\",\"background\":\"app_background__2Zzp2\",\"container\":\"app_container__6cU4e\",\"modalWrapper\":\"app_modalWrapper__pg4fn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"music\":\"music_music__2H0ii\",\"title\":\"music_title__1Kqou\",\"songList\":\"music_songList__1p17f\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__1Zq7Y\",\"icon\":\"modal_icon__1gGCi\",\"message\":\"modal_message__1c0cU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"main_main__3rTl_\"};","module.exports = __webpack_public_path__ + \"static/media/bg.35f444d6.jpg\";","const action = token => ({\n  type: 'SET_TOKEN',\n  payload: token,\n});\n\nexport default action;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Link, withRouter } from 'react-router-dom';\nimport action from '../../actions/login';\n\nimport styles from './header.module.css';\n\nclass Header extends React.Component {\n  logout() {\n    return (e) => {\n      e.preventDefault();\n\n      const { setToken, history } = this.props;\n\n      setToken('');\n      window.localStorage.removeItem('token');\n      history.push('/login');\n    };\n  }\n\n  render() {\n    const { token } = this.props;\n\n    return (\n      <header className={styles.header}>\n        <div className={styles.inner}>\n          <div className={styles.left}>\n            <Link className={styles.logoLink} to=\"/\">\n              <svg className={styles.logo} viewBox=\"0 0 24 24\">\n                <path d=\"M12,1C7,1 3,5 3,10V17A3,3 0 0,0 6,20H9V12H5V10A7,7 0 0,1 12,3A7,7 0 0,1 19,10V12H15V20H18A3,3 0 0,0 21,17V10C21,5 16.97,1 12,1Z\" />\n              </svg>\n            </Link>\n            {token && (\n              <nav className={styles.navWrapper}>\n                <Link className={styles.link} to=\"/music\">Music</Link>\n                <Link className={styles.link} to=\"/upload\">Upload</Link>\n              </nav>\n            )}\n          </div>\n          <div className={styles.right}>\n            {!token && <Link className={styles.link} to=\"/login\">Login</Link>}\n            {token && <Link className={styles.link} to=\"?logout\" onClick={this.logout()}>Logout</Link>}\n          </div>\n        </div>\n      </header>\n    );\n  }\n}\n\nHeader.propTypes = {\n  token: PropTypes.string.isRequired,\n  setToken: PropTypes.func.isRequired,\n  history: PropTypes.shape({\n    push: PropTypes.func,\n  }).isRequired,\n};\n\nconst mapStateToProps = store => ({\n  token: store.login.token,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setToken: token => dispatch(action(token)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Header));\n","const action = message => ({\n  type: 'SET_ERROR_MESSAGE',\n  payload: message,\n});\n\nexport default action;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport filesize from 'filesize';\nimport errAction from '../../../../actions/error';\n\nimport styles from './status.module.css';\n\nconst { REACT_APP_API_URL = '' } = process.env;\n\nclass Status extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      storage: null,\n    };\n  }\n\n  componentDidMount() {\n    this.updateStatus();\n    this.interval = setInterval(() => this.updateStatus(), 300000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  updateStatus() {\n    const { setError } = this.props;\n\n    fetch(`${REACT_APP_API_URL}/api/status`, {\n      method: 'GET',\n      headers: {\n        accept: 'application/vnd.moosik.v1+json',\n        'content-type': 'application/json',\n      },\n    })\n      .then(res => res.json())\n      .then((res) => {\n        const { storage } = res;\n\n        this.setState({ storage });\n      })\n      .catch((error) => {\n        setError(error.toString());\n      });\n  }\n\n  render() {\n    const { storage } = this.state;\n\n    return (\n      <section className={styles.status}>\n        <h1 className={styles.title}>Storage Status</h1>\n        {storage && (\n          <div className={styles.body}>\n            <p className={styles.item}>\n              Total Space:&ensp;\n              <span>{filesize(storage.totalSpace)}</span>\n            </p>\n            <p className={styles.item}>\n              Used Space:&ensp;\n              <span>{filesize(storage.usedSpace)}</span>\n            </p>\n            <p className={styles.item}>\n              Max File Size:&ensp;\n              <span>{filesize(storage.maxFileSize)}</span>\n            </p>\n          </div>\n        )}\n      </section>\n    );\n  }\n}\n\nStatus.propTypes = {\n  setError: PropTypes.func.isRequired,\n};\n\nconst mapDispatchToProps = dispatch => ({\n  setError: message => dispatch(errAction(message)),\n});\n\nexport default connect(null, mapDispatchToProps)(Status);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRouter, Link } from 'react-router-dom';\nimport uuidv4 from 'uuid/v4';\nimport action from '../../../../actions/login';\nimport errAction from '../../../../actions/error';\n\nimport styles from './login.module.css';\n\nconst { REACT_APP_API_URL = '' } = process.env;\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      username: '', password: '',\n    };\n\n    this.uuids = {\n      username: uuidv4(), password: uuidv4(),\n    };\n  }\n\n  componentDidMount() {\n    const { token, history } = this.props;\n\n    if (token) {\n      history.push('/');\n      return false;\n    }\n\n    return true;\n  }\n\n  onInput(e) {\n    e.preventDefault();\n\n    const { username, password } = this.uuids;\n\n    const { id, value } = e.target;\n    switch (id) {\n      case username:\n        this.setState({ username: value });\n        break;\n      case password:\n        this.setState({ password: value });\n        break;\n      default:\n    }\n  }\n\n  login(e) {\n    e.preventDefault();\n\n    const { setToken, history, setError } = this.props;\n\n    const { username, password } = this.state;\n\n    fetch(`${REACT_APP_API_URL}/api/login`, {\n      method: 'POST',\n      headers: {\n        accept: 'application/vnd.moosik.v1+json',\n        'content-type': 'application/json',\n      },\n      body: JSON.stringify({ username, password }),\n    })\n      .then(res => res.json())\n      .then((res) => {\n        const { token, message } = res;\n\n        if (!token) {\n          setError(message);\n          return;\n        }\n\n        setToken(token);\n        window.localStorage.setItem('token', token);\n        history.push('/');\n      })\n      .catch((error) => {\n        setError(error.toString());\n      });\n  }\n\n  render() {\n    const { uuids } = this;\n\n    return (\n      <section className={styles.login}>\n        <h1 className={styles.title}>Login</h1>\n        <form className={styles.main}>\n          <label htmlFor={uuids.username} className={styles.inputWrapper}>\n            <input\n              id={uuids.username}\n              className={styles.input}\n              type=\"text\"\n              placeholder=\"Username / Email\"\n              onChange={this.onInput.bind(this)}\n            />\n          </label>\n          <label htmlFor={uuids.password} className={styles.inputWrapper}>\n            <input\n              id={uuids.password}\n              className={styles.input}\n              type=\"password\"\n              placeholder=\"Password\"\n              onChange={this.onInput.bind(this)}\n            />\n          </label>\n          <div className={styles.inputWrapper}>\n            <Link className={styles.link} to=\"/forgot\">Forgot your password?</Link>\n            <div className={styles.right}>\n              <Link className={styles.link} to=\"/register\">Need an account?</Link>\n              <input\n                className={styles.submit}\n                type=\"submit\"\n                value=\"Login\"\n                onClick={this.login.bind(this)}\n              />\n            </div>\n          </div>\n        </form>\n      </section>\n    );\n  }\n}\n\nLogin.propTypes = {\n  token: PropTypes.string.isRequired,\n  setToken: PropTypes.func.isRequired,\n  history: PropTypes.shape({\n    push: PropTypes.func,\n  }).isRequired,\n  setError: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = store => ({\n  token: store.login.token,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setToken: token => dispatch(action(token)),\n  setError: message => dispatch(errAction(message)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Login));\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRouter, Link } from 'react-router-dom';\nimport uuidv4 from 'uuid/v4';\nimport errAction from '../../../../actions/error';\n\nimport styles from './register.module.css';\n\nconst { REACT_APP_API_URL = '' } = process.env;\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      username: '', email: '', password: '', retry: '',\n    };\n\n    this.uuids = {\n      username: uuidv4(), email: uuidv4(), password: uuidv4(), retry: uuidv4(),\n    };\n  }\n\n  componentDidMount() {\n    const { token, history } = this.props;\n\n    if (token) {\n      history.push('/');\n      return false;\n    }\n\n    return true;\n  }\n\n  onInput(e) {\n    e.preventDefault();\n\n    const {\n      username, email, password, retry,\n    } = this.uuids;\n\n    const { id, value } = e.target;\n    switch (id) {\n      case username:\n        this.setState({ username: value });\n        break;\n      case email:\n        this.setState({ email: value });\n        break;\n      case password:\n        this.setState({ password: value });\n        break;\n      case retry:\n        this.setState({ retry: value });\n        break;\n      default:\n    }\n  }\n\n  register(e) {\n    e.preventDefault();\n\n    const { history, setError } = this.props;\n\n    const {\n      username, email, password, retry,\n    } = this.state;\n\n    if (!/[a-zA-Z0-9\\-_]/.test(username)) {\n      setError('Username must contain only English characters, numbers, dot, dash or underline.');\n      return;\n    }\n\n    if (!/^\\w+[\\w-.]*@\\w+((-\\w+)|(\\w*))\\.[a-z]{2,3}$/.test(email)) {\n      setError('Invalid email.');\n      return;\n    }\n\n    if (password.length < 8) {\n      setError('Password too short. Use 8 or more characters.');\n      return;\n    }\n\n    if (password !== retry) {\n      setError('Passwords don\\'t match.');\n      return;\n    }\n\n    fetch(`${REACT_APP_API_URL}/api/register`, {\n      method: 'POST',\n      headers: {\n        accept: 'application/vnd.moosik.v1+json',\n        'content-type': 'application/json',\n      },\n      body: JSON.stringify({ username, email, password }),\n    })\n      .then(res => res.json())\n      .then((res) => {\n        const { uuid, message } = res;\n\n        if (!uuid) {\n          setError(message);\n          return;\n        }\n\n        history.push('/login');\n      })\n      .catch((error) => {\n        setError(error.toString());\n      });\n  }\n\n  render() {\n    const { uuids } = this;\n\n    return (\n      <section className={styles.register}>\n        <h1 className={styles.title}>Register</h1>\n        <form className={styles.body}>\n          <label htmlFor={uuids.username} className={styles.inputWrapper}>\n            <input\n              ref={this.username}\n              id={uuids.username}\n              className={styles.input}\n              type=\"text\"\n              placeholder=\"Username\"\n              onChange={this.onInput.bind(this)}\n            />\n          </label>\n          <label htmlFor={uuids.email} className={styles.inputWrapper}>\n            <input\n              ref={this.email}\n              id={uuids.email}\n              className={styles.input}\n              type=\"email\"\n              placeholder=\"Email\"\n              onChange={this.onInput.bind(this)}\n            />\n          </label>\n          <label htmlFor={uuids.password} className={styles.inputWrapper}>\n            <input\n              ref={this.password}\n              id={uuids.password}\n              className={styles.input}\n              type=\"password\"\n              placeholder=\"Password\"\n              onChange={this.onInput.bind(this)}\n            />\n          </label>\n          <label htmlFor={uuids.retry} className={styles.inputWrapper}>\n            <input\n              ref={this.retry}\n              id={uuids.retry}\n              className={styles.input}\n              type=\"password\"\n              placeholder=\"Re-type Password\"\n              onChange={this.onInput.bind(this)}\n            />\n          </label>\n          <div className={styles.inputWrapper}>\n            <Link className={styles.link} to=\"/login\">Already have account?</Link>\n            <input\n              className={styles.submit}\n              type=\"submit\"\n              value=\"Register\"\n              onClick={this.register.bind(this)}\n            />\n          </div>\n        </form>\n      </section>\n    );\n  }\n}\n\nRegister.propTypes = {\n  token: PropTypes.string.isRequired,\n  history: PropTypes.shape({\n    push: PropTypes.func,\n  }).isRequired,\n  setError: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = store => ({\n  token: store.login.token,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setError: message => dispatch(errAction(message)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Register));\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport uuidv4 from 'uuid/v4';\nimport errAction from '../../../../actions/error';\n\nimport styles from './forgot.module.css';\n\nconst { REACT_APP_API_URL = '' } = process.env;\n\nclass Forgot extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: '',\n    };\n\n    this.uuids = {\n      email: uuidv4(),\n    };\n  }\n\n  componentDidMount() {\n    const { token, history } = this.props;\n\n    if (token) {\n      history.push('/');\n      return false;\n    }\n\n    return true;\n  }\n\n  onInput(e) {\n    e.preventDefault();\n\n    this.setState({ email: e.target.value });\n  }\n\n  requestPasswordChange(e) {\n    e.preventDefault();\n\n    const { setError } = this.props;\n\n    const { email } = this.state;\n\n    if (!/^\\w+[\\w-.]*@\\w+((-\\w+)|(\\w*))\\.[a-z]{2,3}$/.test(email)) {\n      setError('Invalid email.');\n      return;\n    }\n\n    fetch(`${REACT_APP_API_URL}/api/forgot`, {\n      method: 'POST',\n      headers: {\n        accept: 'application/vnd.moosik.v1+json',\n        'content-type': 'application/json',\n      },\n      body: JSON.stringify({ email }),\n    })\n      .then(res => res.json())\n      .then((res) => {\n        setError(res.message);\n      })\n      .catch((error) => {\n        setError(error.toString());\n      });\n  }\n\n  render() {\n    const { uuids } = this;\n\n    return (\n      <section className={styles.forgot}>\n        <h1 className={styles.title}>Forgot</h1>\n        <form className={styles.main}>\n          <div className={styles.note}>\n            <p>To request a new password please enter your account email in the box below.</p>\n            <p>We will send you an email with further instructions.</p>\n          </div>\n          <label htmlFor={uuids.email} className={styles.inputWrapper}>\n            <input\n              ref={this.email}\n              id={uuids.email}\n              className={styles.input}\n              type=\"email\"\n              placeholder=\"Email\"\n              onChange={this.onInput.bind(this)}\n            />\n          </label>\n          <div className={styles.inputWrapper}>\n            <input\n              className={styles.submit}\n              type=\"submit\"\n              value=\"Request Password Change\"\n              onClick={this.requestPasswordChange.bind(this)}\n            />\n          </div>\n        </form>\n      </section>\n    );\n  }\n}\n\nForgot.propTypes = {\n  token: PropTypes.string.isRequired,\n  history: PropTypes.shape({\n    push: PropTypes.func,\n  }).isRequired,\n  setError: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = store => ({\n  token: store.login.token,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setError: message => dispatch(errAction(message)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Forgot));\n","export const actions = {\n  SET_SONGS: 'SET_SONGS',\n  SET_NOW_PLAYING: 'SET_NP',\n  SET_PAUSE: 'SET_PAUSE',\n};\n\nconst action = (type, value) => ({\n  type,\n  payload: value,\n});\n\nexport default action;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport action, { actions } from '../../../../../../actions/player';\n\nimport styles from './song.module.css';\n\nimport icons from './icons.svg';\n\nclass Song extends React.Component {\n  onClick() {\n    const {\n      i, np, setNP, pause, setPause,\n    } = this.props;\n\n    if (i === np) {\n      setPause(!pause);\n      return;\n    }\n\n    setNP(i);\n  }\n\n  render() {\n    const {\n      author, title, cover, edit, i, np, pause,\n    } = this.props;\n\n    const play = `${icons}#${((i === np) && !pause) ? 'pause' : 'play'}`;\n\n    return (\n      <div className={styles.track}>\n        <div className={styles.cover} style={{ backgroundImage: `url(${cover})` }}>\n          {!cover && (\n            <svg className={styles.defaultCover}>\n              <use xmlnsXlink=\"http://www.w3.org/1999/xlink\" xlinkHref={`${icons}#cover`} />\n            </svg>\n          )}\n          <button\n            className={`${styles.button} ${styles.play}`}\n            type=\"button\"\n            onClick={this.onClick.bind(this)}\n          >\n            <svg className={styles.playIcon}>\n              <use xmlnsXlink=\"http://www.w3.org/1999/xlink\" xlinkHref={play} />\n            </svg>\n          </button>\n        </div>\n        <div className={styles.content}>\n          <div className={styles.title}>{title}</div>\n          <div className={styles.author}>{author}</div>\n        </div>\n        <div className={styles.actions}>\n          <button className={`${styles.button} ${styles.action}`} type=\"button\">\n            <svg className={styles.actionIcon}>\n              <use xmlnsXlink=\"http://www.w3.org/1999/xlink\" xlinkHref={`${icons}#like`} />\n            </svg>\n          </button>\n          {edit && (\n            <button className={`${styles.button} ${styles.action}`} type=\"button\">\n              <svg className={styles.actionIcon}>\n                <use xmlnsXlink=\"http://www.w3.org/1999/xlink\" xlinkHref={`${icons}#edit`} />\n              </svg>\n            </button>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nSong.defaultProps = {\n  cover: null,\n  edit: false,\n};\n\nSong.propTypes = {\n  author: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  cover: PropTypes.string,\n  i: PropTypes.number.isRequired,\n  edit: PropTypes.bool,\n  np: PropTypes.number.isRequired,\n  setNP: PropTypes.func.isRequired,\n  pause: PropTypes.bool.isRequired,\n  setPause: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = store => ({\n  np: store.player.nowPlaying,\n  pause: store.player.paused,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setNP: np => dispatch(action(actions.SET_NOW_PLAYING, np)),\n  setPause: paused => dispatch(action(actions.SET_PAUSE, paused)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Song);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport Song from './components/Song';\n\nimport styles from './music.module.css';\n\nconst Music = ({ songs }) => (\n  <section className={styles.music}>\n    <h1 className={styles.title}>All</h1>\n    <div className={styles.songList}>\n      {songs.map((song, i) => (\n        <Song key={song.uuid} author={song.author} title={song.title} cover={song.cover} i={i} />\n      ))}\n    </div>\n  </section>\n);\n\nMusic.propTypes = {\n  songs: PropTypes.arrayOf(PropTypes.shape({\n    uuid: PropTypes.string,\n    author: PropTypes.string,\n    title: PropTypes.string,\n    cover: PropTypes.string,\n  })).isRequired,\n};\n\nconst mapStateToProps = store => ({\n  songs: store.player.songs,\n});\n\nexport default connect(mapStateToProps)(Music);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport uuidv4 from 'uuid/v4';\nimport errAction from '../../../../actions/error';\n\nimport styles from './upload.module.css';\n\nconst { REACT_APP_API_URL = '' } = process.env;\n\nclass Upload extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      file: null, artist: '', title: '', name: '',\n    };\n\n    this.uuids = {\n      file: uuidv4(), artist: uuidv4(), title: uuidv4(), cover: uuidv4(),\n    };\n  }\n\n  componentDidMount() {\n    const { token, history } = this.props;\n\n    if (!token) {\n      history.push('/');\n      return false;\n    }\n\n    return true;\n  }\n\n  onInput(e) {\n    e.preventDefault();\n\n    const { file, artist, title } = this.uuids;\n\n    const { id, value, files } = e.target;\n    switch (id) {\n      case file: {\n        if (files.length === 0) {\n          return;\n        }\n\n        const { name } = files[0];\n        this.setState({ name });\n\n        this.setState({ file: files[0] });\n        break;\n      }\n      case artist:\n        this.setState({ artist: value });\n        break;\n      case title:\n        this.setState({ title: value });\n        break;\n      default:\n    }\n  }\n\n  onDrop(e) {\n    e.preventDefault();\n\n    if (e.dataTransfer.files) {\n      const file = e.dataTransfer.files[0];\n\n      this.setState({ file, name: file.name });\n    }\n  }\n\n  upload(e) {\n    e.preventDefault();\n\n    const { token, setError } = this.props;\n\n    const { file, artist, title } = this.state;\n\n    if (file.size > 10 * 1024 * 1024) {\n      setError('File too large. Your audio file may not exceed 10 MB.');\n      return;\n    }\n\n    if (file.type !== 'audio/mp3') {\n      setError('Unsupported type. Your audio file has to be in MP3 format.');\n      return;\n    }\n\n    fetch(`${REACT_APP_API_URL}/api/songs`, {\n      method: 'PUT',\n      headers: {\n        accept: 'application/vnd.moosik.v1+json',\n        'content-type': 'audio/mpeg',\n        authorization: `Bearer ${token}`,\n        'x-uploaded-filename': artist && title ? `${artist} - ${title}` : file.name,\n      },\n      body: file,\n    })\n      .then(res => res.json())\n      .then((res) => {\n        const { uuid, message } = res;\n\n        if (!uuid) {\n          setError(message);\n          return;\n        }\n\n        // Temporary error\n        setError(message);\n      })\n      .catch((error) => {\n        setError(error.toString());\n      });\n  }\n\n  render() {\n    const { name } = this.state;\n\n    const { uuids } = this;\n\n    return (\n      <section\n        className={styles.upload}\n        onDrop={this.onDrop.bind(this)}\n        onDragOver={e => e.preventDefault()}\n      >\n        <h1 className={styles.title}>Drag and drop your track here</h1>\n        <form className={styles.main}>\n          <div className={styles.inputWrapper}>\n            <label className={styles.file} htmlFor={uuids.file}>\n              <input\n                className={styles.fileInput}\n                id={uuids.file}\n                type=\"file\"\n                accept=\"audio/mpeg\"\n                onChange={this.onInput.bind(this)}\n              />\n              <span>or choose file to upload</span>\n            </label>\n          </div>\n          {name && <p className={styles.filename}>{name}</p>}\n          <div className={styles.note}>\n            <p>Your audio file may not exceed 10 MB and has to be in MP3 format.</p>\n          </div>\n          <div className={styles.songEdit}>\n            <label htmlFor={uuids.artist} className={styles.inputWrapper}>\n              <input\n                id={uuids.artist}\n                className={styles.input}\n                type=\"text\"\n                placeholder=\"Artist\"\n                onChange={this.onInput.bind(this)}\n              />\n            </label>\n            <label htmlFor={uuids.title} className={styles.inputWrapper}>\n              <input\n                id={uuids.title}\n                className={styles.input}\n                type=\"text\"\n                placeholder=\"Title\"\n                onChange={this.onInput.bind(this)}\n              />\n            </label>\n            <label htmlFor={uuids.cover} className={styles.inputWrapper}>\n              <input\n                id={uuids.cover}\n                className={styles.input}\n                type=\"text\"\n                placeholder=\"Cover\"\n                onChange={this.onInput.bind(this)}\n              />\n            </label>\n          </div>\n          <div className={styles.inputWrapper}>\n            <input\n              className={styles.submit}\n              type=\"submit\"\n              value=\"Upload\"\n              onClick={this.upload.bind(this)}\n            />\n          </div>\n        </form>\n      </section>\n    );\n  }\n}\n\nUpload.propTypes = {\n  token: PropTypes.string.isRequired,\n  history: PropTypes.shape({\n    push: PropTypes.func,\n  }).isRequired,\n  setError: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = store => ({\n  token: store.login.token,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setError: message => dispatch(errAction(message)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Upload));\n","import React from 'react';\nimport Status from './components/Status';\nimport Login from './components/Login';\nimport Register from './components/Register';\nimport Forgot from './components/Forgot';\nimport Music from './components/Music';\nimport Upload from './components/Upload';\n\nconst routes = [\n  {\n    path: '/',\n    component: () => <Status />,\n    exact: true,\n  },\n  {\n    path: '/music',\n    component: () => <Music />,\n  },\n  {\n    path: '/upload',\n    component: () => <Upload />,\n  },\n  {\n    path: '/login',\n    component: () => <Login />,\n  },\n  {\n    path: '/register',\n    component: () => <Register />,\n  },\n  {\n    path: '/forgot',\n    component: () => <Forgot />,\n  },\n];\n\nexport default routes;\n","import React from 'react';\nimport { Route } from 'react-router-dom';\nimport routes from './routes';\n\nimport styles from './main.module.css';\n\nconst Main = () => (\n  <div className={styles.main}>\n    {routes.map(route => (\n      <Route\n        key={route.path.slice(1)}\n        path={route.path}\n        component={route.component}\n        exact={route.exact}\n      />\n    ))}\n  </div>\n);\n\nexport default Main;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\n\nimport styles from './timeline.module.css';\n\nconst Timeline = ({ timePassed, duration }) => (\n  <div className={styles.timeline}>\n    <div className={styles.timePassed}>{moment(timePassed * 1000).format('mm:ss')}</div>\n    <div className={styles.progressWrapper}>\n      <div className={styles.progressBackground}>\n        <div className={styles.progressBar} style={{ width: `${timePassed / duration * 100}%` }} />\n      </div>\n    </div>\n    <div className={styles.duration}>{moment(duration * 1000).format('mm:ss')}</div>\n  </div>\n);\n\nTimeline.propTypes = {\n  timePassed: PropTypes.number.isRequired,\n  duration: PropTypes.number.isRequired,\n};\n\nexport default Timeline;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './soundBadge.module.css';\n\nconst SoundBadge = ({ author, title, cover }) => (\n  <div className={styles.soundBadge}>\n    <div className={styles.cover} style={{ backgroundImage: `url(${cover})` }} />\n    <div className={styles.titleContextContainer}>\n      <span className={`${styles.title} ${styles.truncate}`}>{title}</span>\n      <span className={`${styles.author} ${styles.truncate}`}>{author}</span>\n    </div>\n  </div>\n);\n\nSoundBadge.defaultProps = {\n  author: 'No Author',\n  title: 'No Title',\n  cover: '',\n};\n\nSoundBadge.propTypes = {\n  author: PropTypes.string,\n  title: PropTypes.string,\n  cover: PropTypes.string,\n};\n\nexport default SoundBadge;\n","import React, { createRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport action, { actions } from '../../actions/player';\nimport errAction from '../../actions/error';\nimport Timeline from './components/Timeline';\nimport SoundBadge from './components/SoundBadge';\n\nimport styles from './player.module.css';\n\nimport icons from './icons.svg';\n\nconst { REACT_APP_API_URL = '' } = process.env;\n\nclass Player extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      song: {},\n      currentTime: 0,\n      duration: 0,\n      loop: false,\n      shuffle: false,\n      muted: false,\n      volume: 1,\n    };\n\n    this.audio = createRef();\n  }\n\n  componentDidMount() {\n    const { token, setSongs, setError } = this.props;\n\n    fetch(`${REACT_APP_API_URL}/api/songs`, {\n      method: 'GET',\n      headers: {\n        accept: 'application/vnd.moosik.v1+json',\n        'content-type': 'application/json',\n        authorization: `Bearer ${token}`,\n      },\n    })\n      .then(res => res.json())\n      .then((res) => {\n        const { message, songs } = res;\n\n        if (!songs) {\n          setError(message);\n          return;\n        }\n\n        setSongs(songs);\n      })\n      .catch((error) => {\n        setError(error.toString());\n      });\n  }\n\n  componentDidUpdate(prev) {\n    const {\n      token, songs, nowPlaying, paused, setError,\n    } = this.props;\n\n    if (!songs.length) {\n      return;\n    }\n\n    if (prev.nowPlaying !== nowPlaying) {\n      fetch(`${REACT_APP_API_URL}/api/songs/${songs[nowPlaying].uuid}`, {\n        method: 'GET',\n        headers: {\n          accept: 'application/vnd.moosik.v1+json',\n          'content-type': 'application/json',\n          authorization: `Bearer ${token}`,\n        },\n      })\n        .then(res => res.json())\n        .then((res) => {\n          const { message, song } = res;\n\n          if (!song) {\n            setError(message);\n            return;\n          }\n\n          this.setState({ song });\n        })\n        .catch((error) => {\n          setError(error.toString());\n        });\n\n      return;\n    }\n\n    if (prev.paused !== paused) {\n      const audio = this.audio.current;\n\n      if (paused) {\n        audio.pause();\n      } else {\n        audio.play();\n      }\n    }\n  }\n\n  prev() {\n    const { nowPlaying, setNowPlaying } = this.props;\n    if (nowPlaying > 0) {\n      setNowPlaying(nowPlaying - 1);\n    }\n  }\n\n  play() {\n    const {\n      nowPlaying, setNowPlaying, paused, setPause,\n    } = this.props;\n\n    if (nowPlaying === -1) {\n      setNowPlaying(nowPlaying === -1 ? 0 : nowPlaying);\n      return;\n    }\n\n    setPause(!paused);\n  }\n\n  next() {\n    const { songs, nowPlaying, setNowPlaying } = this.props;\n    if (nowPlaying < songs.length - 1) {\n      setNowPlaying(nowPlaying + 1);\n    }\n  }\n\n  repeat() {\n    this.setState(prev => ({ loop: !prev.loop }));\n  }\n\n  shuffle() {\n    this.setState(prev => ({ shuffle: !prev.shuffle }));\n  }\n\n  mute() {\n    this.setState(prev => ({ muted: !prev.muted }));\n  }\n\n  changeVolume(e) {\n    let { target } = e;\n    if (target.classList.contains(styles.volumeBar)) {\n      target = target.parentNode;\n    }\n\n    const r = target.getBoundingClientRect();\n    const v = 1 - (e.clientY - r.top) / r.height;\n\n    if ((v < 0) || (v > 1)) {\n      return;\n    }\n\n    this.audio.current.volume = v;\n  }\n\n  update(e) {\n    const { setPause } = this.props;\n\n    const {\n      paused, currentTime, duration, volume,\n    } = e.target;\n\n    this.setState({ currentTime, duration, volume });\n    setPause(paused);\n  }\n\n  ended() {\n    const { songs, nowPlaying, setNowPlaying } = this.props;\n    const { shuffle } = this.state;\n\n    if (shuffle) {\n      setNowPlaying(Math.round(Math.random() * (songs.length - 1)));\n      return;\n    }\n\n    if (nowPlaying < songs.length - 1) {\n      setNowPlaying(nowPlaying + 1);\n    }\n  }\n\n  render() {\n    const { paused } = this.props;\n    const {\n      song, currentTime, duration, muted, loop, volume, shuffle,\n    } = this.state;\n\n    return (\n      <div className={styles.player}>\n        <section className={styles.wrapper}>\n          <div className={styles.controls}>\n            <button type=\"button\" className={styles.control} onClick={this.prev.bind(this)}>\n              <svg className={styles.controlIcon}>\n                <use xmlnsXlink=\"http://www.w3.org/1999/xlink\" xlinkHref={`${icons}#prev`} />\n              </svg>\n            </button>\n            <button type=\"button\" className={styles.control} onClick={this.play.bind(this)}>\n              <svg className={styles.controlIcon}>\n                <use xmlnsXlink=\"http://www.w3.org/1999/xlink\" xlinkHref={`${icons}#${paused ? 'play' : 'pause'}`} />\n              </svg>\n            </button>\n            <button type=\"button\" className={styles.control} onClick={this.next.bind(this)}>\n              <svg className={styles.controlIcon}>\n                <use xmlnsXlink=\"http://www.w3.org/1999/xlink\" xlinkHref={`${icons}#next`} />\n              </svg>\n            </button>\n            <button type=\"button\" className={styles.control} onClick={this.repeat.bind(this)}>\n              <svg className={styles.controlIcon}>\n                <use xmlnsXlink=\"http://www.w3.org/1999/xlink\" xlinkHref={`${icons}#repeat`} style={{ fill: loop ? 'var(--red-dark)' : '' }} />\n              </svg>\n            </button>\n            <button type=\"button\" className={styles.control} onClick={this.shuffle.bind(this)}>\n              <svg className={styles.controlIcon}>\n                <use xmlnsXlink=\"http://www.w3.org/1999/xlink\" xlinkHref={`${icons}#shuffle`} style={{ fill: shuffle ? 'var(--red-dark)' : '' }} />\n              </svg>\n            </button>\n          </div>\n          <Timeline timePassed={currentTime} duration={duration || 0} />\n          <div className={`${styles.controls} ${styles.volume}`}>\n            <button type=\"button\" className={styles.control} onClick={this.mute.bind(this)}>\n              <svg className={styles.controlIcon}>\n                <use xmlnsXlink=\"http://www.w3.org/1999/xlink\" xlinkHref={`${icons}#${muted ? 'mute' : 'volume'}`} />\n              </svg>\n            </button>\n            <div className={styles.volumeWrapper}>\n              <div className={styles.volumeSlider} role=\"presentation\" onClick={this.changeVolume.bind(this)}>\n                <div className={styles.volumeBackground} />\n                <div className={styles.volumeBar} style={{ height: `${100 * volume}%` }} />\n              </div>\n            </div>\n          </div>\n          <SoundBadge author={song.author} title={song.title} cover={song.cover} />\n          <audio\n            ref={this.audio}\n            autoPlay\n            src={song.url}\n            muted={muted}\n            loop={loop}\n            onCanPlay={this.update.bind(this)}\n            onEnded={this.ended.bind(this)}\n            onTimeUpdate={this.update.bind(this)}\n            onVolumeChange={this.update.bind(this)}\n          />\n        </section>\n      </div>\n    );\n  }\n}\n\nPlayer.propTypes = {\n  token: PropTypes.string.isRequired,\n  songs: PropTypes.arrayOf(PropTypes.shape({\n    uuid: PropTypes.string,\n    author: PropTypes.string,\n    title: PropTypes.string,\n    cover: PropTypes.string,\n  })).isRequired,\n  setSongs: PropTypes.func.isRequired,\n  nowPlaying: PropTypes.number.isRequired,\n  setNowPlaying: PropTypes.func.isRequired,\n  paused: PropTypes.bool.isRequired,\n  setPause: PropTypes.func.isRequired,\n  setError: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = store => ({\n  token: store.login.token,\n  songs: store.player.songs,\n  nowPlaying: store.player.nowPlaying,\n  paused: store.player.paused,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setSongs: songs => dispatch(action(actions.SET_SONGS, songs)),\n  setNowPlaying: np => dispatch(action(actions.SET_NOW_PLAYING, np)),\n  setPause: paused => dispatch(action(actions.SET_PAUSE, paused)),\n  setError: message => dispatch(errAction(message)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Player);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport action from '../../actions/error';\n\nimport styles from './modal.module.css';\n\nclass Modal extends React.Component {\n  componentDidMount() {\n    const { clearError } = this.props;\n\n    setTimeout(() => {\n      clearError();\n    }, 5000);\n  }\n\n  render() {\n    const { error } = this.props;\n\n    return (\n      <div className={styles.modal}>\n        <svg className={styles.icon} viewBox=\"0 0 24 24\">\n          <path d=\"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z\" />\n        </svg>\n        <div className={styles.message}>\n          <span>{error}</span>\n        </div>\n      </div>\n    );\n  }\n}\n\nModal.propTypes = {\n  error: PropTypes.string.isRequired,\n  clearError: PropTypes.func.isRequired,\n};\n\nconst mapDispatchToProps = dispatch => ({\n  clearError: () => dispatch(action('')),\n});\n\nexport default connect(null, mapDispatchToProps)(Modal);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport Header from '../Header';\nimport Main from '../Main';\nimport Player from '../Player';\nimport Modal from '../Modal';\n\nimport styles from './app.module.css';\n\nimport bg from './bg.jpg';\n\nconst App = ({ token, error }) => (\n  <div className={styles.app}>\n    <div className={styles.background} style={{ backgroundImage: `url(${bg})` }} />\n    <main className={styles.container}>\n      <BrowserRouter>\n        <Header />\n        <Main />\n      </BrowserRouter>\n      {token && <Player />}\n    </main>\n    <div className={styles.modalWrapper}>\n      {error && <Modal error={error} />}\n    </div>\n  </div>\n);\n\nApp.propTypes = {\n  token: PropTypes.string.isRequired,\n  error: PropTypes.string.isRequired,\n};\n\nconst mapStateToProps = store => ({\n  token: store.login.token,\n  error: store.error.message,\n});\n\nexport default connect(mapStateToProps)(App);\n","const initialState = {\n  token: window.localStorage.getItem('token') || '',\n};\n\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case 'SET_TOKEN':\n      return { ...state, token: action.payload };\n    default:\n      return state;\n  }\n}\n","const initialState = {\n  songs: [],\n  nowPlaying: -1,\n  paused: true,\n};\n\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case 'SET_SONGS':\n      return { ...state, songs: action.payload };\n    case 'SET_NP':\n      return { ...state, nowPlaying: action.payload };\n    case 'SET_PAUSE':\n      return { ...state, paused: action.payload };\n    default:\n      return state;\n  }\n}\n","const initialState = {\n  message: '',\n};\n\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case 'SET_ERROR_MESSAGE':\n      return { ...state, message: action.payload };\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from 'redux';\nimport login from './login';\nimport player from './player';\nimport error from './error';\n\nconst rootReducer = combineReducers({\n  login, player, error,\n});\n\nexport default rootReducer;\n","import { createStore } from 'redux';\nimport rootReducer from '../reducers/root';\n\nconst store = createStore(rootReducer);\n\nexport default store;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport App from './components/App';\nimport store from './store';\nimport * as serviceWorker from './serviceWorker';\n\nimport './layouts/default.css';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}