(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,function(e,t,a){e.exports={player:"player_player__35Gch",wrapper:"player_wrapper__2pvXA",controls:"player_controls__yrmwU",control:"player_control__1GAJR",icon:"player_icon__2LOrm",volume:"player_volume__3Swwg",volumeWrapper:"player_volumeWrapper__1fz4y",volumeSlider:"player_volumeSlider__1bdID",volumeBackground:"player_volumeBackground__1nr9H",volumeBar:"player_volumeBar__64T8Y"}},,,,,,function(e,t,a){e.exports={track:"song_track__RX6bx",cover:"song_cover__1Z4fR",defaultCover:"song_defaultCover__1Scdp",button:"song_button__sSeHU",play:"song_play__3MQc2",icon:"song_icon__3i7ba",content:"song_content__TWzaj",actions:"song_actions__2A91g",action:"song_action__Dd0CG",info:"song_info__jIaQd",title:"song_title__2OYyJ",author:"song_author__2GBdg"}},,,function(e,t,a){e.exports={register:"register_register__3K1Qz",title:"register_title__1qn8q",main:"register_main__wdjIV",inputWrapper:"register_inputWrapper__3hxjc",right:"register_right__6B6O5",input:"register_input__285Xz",submit:"register_submit__pfce4",link:"register_link__KC47u"}},,,,function(e,t,a){e.exports={login:"login_login__KNSyK",title:"login_title__2BrJb",main:"login_main__3gDUL",inputWrapper:"login_inputWrapper__PxK70",right:"login_right__2EU-W",input:"login_input__3Z4uP",submit:"login_submit__3z0zh",link:"login_link__QwjVM"}},,,,function(e,t,a){e.exports={header:"header_header__3w3xx",inner:"header_inner__ueAE6",left:"header_left__oqI23",right:"header_right__2pdo2",logoLink:"header_logoLink__MRkg5",logo:"header_logo__2Sn9n",navWrapper:"header_navWrapper__32fBU",link:"header_link__3JPaZ"}},function(e,t,a){e.exports={forgot:"forgot_forgot__6N7KH",title:"forgot_title__3VwzE",main:"forgot_main__3wV8l",note:"forgot_note__1WMHf",inputWrapper:"forgot_inputWrapper__3NOri",right:"forgot_right__gOi91",input:"forgot_input__2hnXW",submit:"forgot_submit__mizzt"}},function(e,t,a){e.exports={upload:"upload_upload__2gDVd",title:"upload_title__26joS",main:"upload_main__QlYCT",inputWrapper:"upload_inputWrapper__2faF0",file:"upload_file__HK228",fileInput:"upload_fileInput__3OG6N",note:"upload_note__1Kiz-",filename:"upload_filename__1sd5q"}},,,function(e,t,a){e.exports={soundBadge:"soundBadge_soundBadge__hUvOb",cover:"soundBadge_cover__3DUfa",titleContextContainer:"soundBadge_titleContextContainer__8tE46",title:"soundBadge_title__3Wt33",author:"soundBadge_author__2z1MH",truncate:"soundBadge_truncate__3U-6n"}},function(e,t,a){e.exports={status:"status_status__1dbQM",title:"status_title__2RHYm",body:"status_body__3W00t",item:"status_item__2fj3D"}},function(e,t,a){e.exports={timeline:"timeline_timeline__3ng4V",progressWrapper:"timeline_progressWrapper__2Mxxn",progressBackground:"timeline_progressBackground__VsvSl",progressBar:"timeline_progressBar__2sPc6",timePassed:"timeline_timePassed__pmNyr",duration:"timeline_duration__1I6eB"}},function(e,t,a){e.exports=a.p+"static/media/icons.174b8195.svg"},,,,function(e,t,a){e.exports=a.p+"static/media/icons.6b9d14e4.svg"},,,,,function(e,t,a){e.exports={music:"music_music__2H0ii",title:"music_title__1Kqou",songList:"music_songList__1p17f"}},function(e,t,a){e.exports={modal:"modal_modal__1Zq7Y",icon:"modal_icon__1gGCi",message:"modal_message__1c0cU"}},function(e,t,a){e.exports={app:"app_app__12nIj",container:"app_container__6cU4e",modalWrapper:"app_modalWrapper__pg4fn"}},,,,,,,,,function(e,t,a){e.exports={main:"main_main__3rTl_"}},function(e,t,a){e.exports=a.p+"static/media/bg.983361a2.jpg"},function(e,t,a){e.exports=a(66)},,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(35),s=a.n(o),i=a(3),c=a(11),l=a(5),u=a(6),p=a(8),m=a(7),d=a(9),h=a(24),f=function(e){return{type:"SET_TOKEN",payload:e}},_=a(21),v=a.n(_),g=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"logout",value:function(){var e=this;return function(t){t.preventDefault();var a=e.props,n=a.setToken,r=a.history;n(""),window.localStorage.removeItem("token"),r.push("/login")}}},{key:"render",value:function(){var e=this.props.token;return r.a.createElement("header",{className:v.a.header},r.a.createElement("div",{className:v.a.inner},r.a.createElement("div",{className:v.a.left},r.a.createElement(c.b,{className:v.a.logoLink,to:"/"},r.a.createElement("svg",{className:v.a.logo,viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M12,1C7,1 3,5 3,10V17A3,3 0 0,0 6,20H9V12H5V10A7,7 0 0,1 12,3A7,7 0 0,1 19,10V12H15V20H18A3,3 0 0,0 21,17V10C21,5 16.97,1 12,1Z"}))),e&&r.a.createElement("nav",{className:v.a.navWrapper},r.a.createElement(c.b,{className:v.a.link,to:"/music"},"Music"),r.a.createElement(c.b,{className:v.a.link,to:"/upload"},"Upload"))),r.a.createElement("div",{className:v.a.right},!e&&r.a.createElement(c.b,{className:v.a.link,to:"/login"},"Login"),e&&r.a.createElement(c.b,{className:v.a.link,to:"?logout",onClick:this.logout()},"Logout"))))}}]),t}(r.a.Component),b=Object(i.b)(function(e){return{token:e.login.token}},function(e){return{setToken:function(t){return e(f(t))}}})(Object(h.e)(g)),E=a(2),k=a.n(E),y=a(12),w=a(37),N=a.n(w),x=function(e){return{type:"SET_ERROR_MESSAGE",payload:e}},j=a(27),O=a.n(j),C=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,S=void 0===C?"":C,P=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={storage:null},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(k.a.mark(function e(){var t=this;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateStatus();case 2:this.interval=setInterval(Object(y.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.updateStatus();case 2:case"end":return e.stop()}},e)})),3e5);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"updateStatus",value:function(){var e=Object(y.a)(k.a.mark(function e(){var t,a,n,r,o,s;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.setError,a="".concat(S,"/api/status"),n={accept:"application/vnd.moosik.v1+json","content-type":"application/json"},e.prev=3,e.next=6,fetch(a,{method:"GET",headers:n}).then(function(e){return e.json()});case 6:if(r=e.sent,o=r.message,s=r.storage){e.next=11;break}throw new Error(o);case 11:this.setState({storage:s}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),t(e.t0.message);case 17:case"end":return e.stop()}},e,this,[[3,14]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.storage;return r.a.createElement("section",{className:O.a.status},r.a.createElement("h1",{className:O.a.title},"Storage Status"),e&&r.a.createElement("div",{className:O.a.body},r.a.createElement("p",{className:O.a.item},"Total Space:\u2002",r.a.createElement("span",null,N()(e.totalSpace))),r.a.createElement("p",{className:O.a.item},"Used Space:\u2002",r.a.createElement("span",null,N()(e.usedSpace))),r.a.createElement("p",{className:O.a.item},"Max File Size:\u2002",r.a.createElement("span",null,N()(e.maxFileSize)))))}}]),t}(r.a.Component),T=Object(i.b)(null,function(e){return{setError:function(t){return e(x(t))}}})(P),I=a(19),B=a.n(I),U=a(17),W=a.n(U),A=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,R=void 0===A?"":A,D=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={username:"",password:""},a.uuids={username:B()(),password:B()()},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.token,a=e.history;return!t||(a.push("/"),!1)}},{key:"onInput",value:function(e){e.preventDefault();var t=this.uuids,a=t.username,n=t.password,r=e.target,o=r.id,s=r.value;switch(o){case a:this.setState({username:s});break;case n:this.setState({password:s})}}},{key:"login",value:function(){var e=Object(y.a)(k.a.mark(function e(t){var a,n,r,o,s,i,c,l,u,p,m,d;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.props,n=a.setToken,r=a.history,o=a.setError,s=this.state,i=s.username,c=s.password,l="".concat(R,"/api/login"),u={accept:"application/vnd.moosik.v1+json","content-type":"application/json"},e.prev=5,e.next=8,fetch(l,{method:"POST",headers:u,body:JSON.stringify({username:i,password:c})}).then(function(e){return e.json()});case 8:if(p=e.sent,m=p.message,d=p.token){e.next=13;break}throw new Error(m);case 13:n(d),window.localStorage.setItem("token",d),r.push("/"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),o(e.t0.message);case 21:case"end":return e.stop()}},e,this,[[5,18]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.uuids;return r.a.createElement("section",{className:W.a.login},r.a.createElement("h1",{className:W.a.title},"Login"),r.a.createElement("form",{className:W.a.main},r.a.createElement("label",{htmlFor:e.username,className:W.a.inputWrapper},r.a.createElement("input",{id:e.username,className:W.a.input,type:"text",placeholder:"Username / Email",onChange:this.onInput.bind(this)})),r.a.createElement("label",{htmlFor:e.password,className:W.a.inputWrapper},r.a.createElement("input",{id:e.password,className:W.a.input,type:"password",placeholder:"Password",onChange:this.onInput.bind(this)})),r.a.createElement("div",{className:W.a.inputWrapper},r.a.createElement(c.b,{className:W.a.link,to:"/forgot"},"Forgot your password?"),r.a.createElement("div",{className:W.a.right},r.a.createElement(c.b,{className:W.a.link,to:"/register"},"Need an account?"),r.a.createElement("input",{className:W.a.submit,type:"submit",value:"Login",onClick:this.login.bind(this)})))))}}]),t}(r.a.Component),L=Object(i.b)(function(e){return{token:e.login.token}},function(e){return{setToken:function(t){return e(f(t))},setError:function(t){return e(x(t))}}})(Object(h.e)(D)),M=a(13),V=a.n(M),H=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,z=void 0===H?"":H,F=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={username:"",email:"",password:"",retry:""},a.uuids={username:B()(),email:B()(),password:B()(),retry:B()()},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.token,a=e.history;return!t||(a.push("/"),!1)}},{key:"onInput",value:function(e){e.preventDefault();var t=this.uuids,a=t.username,n=t.email,r=t.password,o=t.retry,s=e.target,i=s.id,c=s.value;switch(i){case a:this.setState({username:c});break;case n:this.setState({email:c});break;case r:this.setState({password:c});break;case o:this.setState({retry:c})}}},{key:"register",value:function(){var e=Object(y.a)(k.a.mark(function e(t){var a,n,r,o,s,i,c,l,u,p,m,d;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=this.props,n=a.history,r=a.setError,o=this.state,s=o.username,i=o.email,c=o.password,l=o.retry,/^\w+[\w-.]*@\w+((-\w+)|(\w*))\.[a-z]{2,3}$/.test(i)){e.next=6;break}return r("Invalid email."),e.abrupt("return");case 6:if(c===l){e.next=9;break}return r("Passwords don't match."),e.abrupt("return");case 9:return u="".concat(z,"/api/register"),p={accept:"application/vnd.moosik.v1+json","content-type":"application/json"},e.prev=11,e.next=14,fetch(u,{method:"POST",headers:p,body:JSON.stringify({username:s,email:i,password:c})}).then(function(e){return e.json()});case 14:if(m=e.sent,d=m.message,m.uuid){e.next=19;break}throw new Error(d);case 19:n.push("/login"),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(11),r(e.t0.message);case 25:case"end":return e.stop()}},e,this,[[11,22]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.uuids;return r.a.createElement("section",{className:V.a.register},r.a.createElement("h1",{className:V.a.title},"Register"),r.a.createElement("form",{className:V.a.body},r.a.createElement("label",{htmlFor:e.username,className:V.a.inputWrapper},r.a.createElement("input",{ref:this.username,id:e.username,className:V.a.input,type:"text",placeholder:"Username",onChange:this.onInput.bind(this)})),r.a.createElement("label",{htmlFor:e.email,className:V.a.inputWrapper},r.a.createElement("input",{ref:this.email,id:e.email,className:V.a.input,type:"email",placeholder:"Email",onChange:this.onInput.bind(this)})),r.a.createElement("label",{htmlFor:e.password,className:V.a.inputWrapper},r.a.createElement("input",{ref:this.password,id:e.password,className:V.a.input,type:"password",placeholder:"Password",onChange:this.onInput.bind(this)})),r.a.createElement("label",{htmlFor:e.retry,className:V.a.inputWrapper},r.a.createElement("input",{ref:this.retry,id:e.retry,className:V.a.input,type:"password",placeholder:"Re-type Password",onChange:this.onInput.bind(this)})),r.a.createElement("div",{className:V.a.inputWrapper},r.a.createElement(c.b,{className:V.a.link,to:"/login"},"Already have account?"),r.a.createElement("input",{className:V.a.submit,type:"submit",value:"Register",onClick:this.register.bind(this)}))))}}]),t}(r.a.Component),X=Object(i.b)(function(e){return{token:e.login.token}},function(e){return{setError:function(t){return e(x(t))}}})(Object(h.e)(F)),G=a(22),K=a.n(G),q=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,J=void 0===q?"":q,Y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={email:""},a.uuids={email:B()()},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.token,a=e.history;return!t||(a.push("/"),!1)}},{key:"onInput",value:function(e){e.preventDefault(),this.setState({email:e.target.value})}},{key:"requestPasswordChange",value:function(){var e=Object(y.a)(k.a.mark(function e(t){var a,n,r,o,s,i;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=this.props.setError,n=this.state.email,/^\w+[\w-.]*@\w+((-\w+)|(\w*))\.[a-z]{2,3}$/.test(n)){e.next=6;break}return a("Invalid email."),e.abrupt("return");case 6:return r="".concat(J,"/api/forgot"),o={accept:"application/vnd.moosik.v1+json","content-type":"application/json"},e.prev=8,e.next=11,fetch(r,{method:"POST",headers:o,body:JSON.stringify({email:n})}).then(function(e){return e.json()});case 11:s=e.sent,i=s.message,a(i),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),a(e.t0.message);case 19:case"end":return e.stop()}},e,this,[[8,16]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.uuids;return r.a.createElement("section",{className:K.a.forgot},r.a.createElement("h1",{className:K.a.title},"Forgot"),r.a.createElement("form",{className:K.a.main},r.a.createElement("div",{className:K.a.note},r.a.createElement("p",null,"To request a new password please enter your account email in the box below."),r.a.createElement("p",null,"We will send you an email with further instructions.")),r.a.createElement("label",{htmlFor:e.email,className:K.a.inputWrapper},r.a.createElement("input",{ref:this.email,id:e.email,className:K.a.input,type:"email",placeholder:"Email",onChange:this.onInput.bind(this)})),r.a.createElement("div",{className:K.a.inputWrapper},r.a.createElement("input",{className:K.a.submit,type:"submit",value:"Request Password Change",onClick:this.requestPasswordChange.bind(this)}))))}}]),t}(r.a.Component),Q=Object(i.b)(function(e){return{token:e.login.token}},function(e){return{setError:function(t){return e(x(t))}}})(Object(h.e)(Y)),Z="SET_SONGS",$="SET_NP",ee="SET_PAUSE",te=function(e,t){return{type:e,payload:t}},ae=a(10),ne=a.n(ae),re=a(33),oe=a.n(re),se=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"onClick",value:function(){var e=this.props,t=e.i,a=e.np,n=e.setNP,r=e.pause,o=e.setPause;t!==a?n(t):o(!r)}},{key:"render",value:function(){var e=this.props,t=e.author,a=e.title,n=e.cover,o=e.edit,s=e.i,i=e.np,c=e.pause,l="".concat(oe.a,"#").concat(s!==i||c?"play":"pause");return r.a.createElement("div",{className:ne.a.track},r.a.createElement("div",{className:ne.a.cover,style:{backgroundImage:n?"url(".concat(n,")"):""}},!n&&r.a.createElement("svg",{className:ne.a.defaultCover},r.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"".concat(oe.a,"#cover")})),r.a.createElement("button",{className:"".concat(ne.a.button," ").concat(ne.a.play),type:"button",onClick:this.onClick.bind(this)},r.a.createElement("svg",{className:ne.a.icon},r.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:l})))),r.a.createElement("div",{className:ne.a.content},r.a.createElement("div",{className:ne.a.title},a),r.a.createElement("div",{className:ne.a.author},t)),r.a.createElement("div",{className:ne.a.actions},r.a.createElement("button",{className:"".concat(ne.a.button," ").concat(ne.a.action),type:"button"},r.a.createElement("svg",{className:ne.a.icon},r.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"".concat(oe.a,"#like")}))),o&&r.a.createElement("button",{className:"".concat(ne.a.button," ").concat(ne.a.action),type:"button"},r.a.createElement("svg",{className:ne.a.icon},r.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"".concat(oe.a,"#edit")})))))}}]),t}(r.a.Component);se.defaultProps={cover:null,edit:!1};var ie=Object(i.b)(function(e){return{np:e.player.nowPlaying,pause:e.player.paused}},function(e){return{setNP:function(t){return e(te($,t))},setPause:function(t){return e(te(ee,t))}}})(se),ce=a(38),le=a.n(ce),ue=Object(i.b)(function(e){return{songs:e.player.songs}})(function(e){var t=e.songs;return r.a.createElement("section",{className:le.a.music},r.a.createElement("h1",{className:le.a.title},"All"),r.a.createElement("div",{className:le.a.songList},t.map(function(e,t){return r.a.createElement(ie,{key:e.uuid,author:e.author,title:e.title,cover:e.cover,i:t})})))}),pe=a(23),me=a.n(pe),de=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,he=void 0===de?"":de,fe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).uuids={file:B()()},a.state={name:""},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.token,a=e.history;return!!t||(a.push("/"),!1)}},{key:"onChange",value:function(e){var t=e.target.files[0];this.setState({name:t.name}),this.upload(t)}},{key:"onDrop",value:function(e){if(e.dataTransfer.files){var t=e.dataTransfer.files[0];this.setState({name:t.name}),this.upload(t)}}},{key:"upload",value:function(){var e=Object(y.a)(k.a.mark(function e(t){var a,n,r,o,s,i,c;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props,n=a.token,r=a.setError,!(t.size>10485760)){e.next=4;break}return r("File too large. Your audio file may not exceed 10 MB."),e.abrupt("return");case 4:if("audio/mp3"===t.type){e.next=7;break}return r("Unsupported type. Your audio file has to be in MP3 format."),e.abrupt("return");case 7:return o="".concat(he,"/api/songs"),s={accept:"application/vnd.moosik.v1+json","content-type":"audio/mpeg",authorization:"Bearer ".concat(n),"x-uploaded-filename":encodeURI(t.name)},e.prev=9,e.next=12,fetch(o,{method:"PUT",headers:s,body:t}).then(function(e){return e.json()});case 12:if(i=e.sent,c=i.message,i.uuid){e.next=17;break}throw new Error(c);case 17:r(c),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),r(e.t0.message);case 23:case"end":return e.stop()}},e,this,[[9,20]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.name,t=this.uuids;return r.a.createElement("section",{className:me.a.upload,onDrop:this.onDrop.bind(this),onDragOver:function(e){return e.preventDefault()}},r.a.createElement("h1",{className:me.a.title},"Drag and drop your track here"),r.a.createElement("form",{className:me.a.main},r.a.createElement("div",{className:me.a.inputWrapper},r.a.createElement("label",{className:me.a.file,htmlFor:t.file},r.a.createElement("input",{className:me.a.fileInput,id:t.file,type:"file",accept:"audio/mpeg",onChange:this.onChange.bind(this)}),r.a.createElement("span",null,"or choose file to upload"))),e&&r.a.createElement("p",{className:me.a.filename},e),r.a.createElement("div",{className:me.a.note},r.a.createElement("p",null,"Your audio file may not exceed 10 MB and has to be in MP3 format."))))}}]),t}(r.a.Component),_e=Object(i.b)(function(e){return{token:e.login.token}},function(e){return{setError:function(t){return e(x(t))}}})(Object(h.e)(fe)),ve=[{path:"/",component:function(){return r.a.createElement(T,null)},exact:!0},{path:"/music",component:function(){return r.a.createElement(ue,null)}},{path:"/upload",component:function(){return r.a.createElement(_e,null)}},{path:"/login",component:function(){return r.a.createElement(L,null)}},{path:"/register",component:function(){return r.a.createElement(X,null)}},{path:"/forgot",component:function(){return r.a.createElement(Q,null)}}],ge=a(49),be=a.n(ge),Ee=function(){return r.a.createElement("div",{className:be.a.main},ve.map(function(e){return r.a.createElement(h.a,{key:e.path.slice(1),path:e.path,component:e.component,exact:e.exact})}))},ke=a(45),ye=a.n(ke),we=a(28),Ne=a.n(we),xe=function(e){var t=e.timePassed,a=e.duration;return r.a.createElement("div",{className:Ne.a.timeline},r.a.createElement("div",{className:Ne.a.timePassed},ye()(1e3*t).format("mm:ss")),r.a.createElement("div",{className:Ne.a.progressWrapper},r.a.createElement("div",{className:Ne.a.progressBackground},r.a.createElement("div",{className:Ne.a.progressBar,style:{width:"".concat(t/a*100,"%")}}))),r.a.createElement("div",{className:Ne.a.duration},ye()(1e3*a).format("mm:ss")))},je=a(26),Oe=a.n(je),Ce=function(e){var t=e.author,a=e.title,n=e.cover;return r.a.createElement("div",{className:Oe.a.soundBadge},r.a.createElement("div",{className:Oe.a.cover,style:{backgroundImage:"url(".concat(n,")")}}),r.a.createElement("div",{className:Oe.a.titleContextContainer},r.a.createElement("span",{className:"".concat(Oe.a.title," ").concat(Oe.a.truncate)},a),r.a.createElement("span",{className:"".concat(Oe.a.author," ").concat(Oe.a.truncate)},t)))};Ce.defaultProps={author:"No Author",title:"No Title",cover:""};var Se=Ce,Pe=a(4),Te=a.n(Pe),Ie=a(29),Be=a.n(Ie),Ue=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,We=void 0===Ue?"":Ue,Ae=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={song:{},currentTime:0,duration:0,loop:!1,shuffle:!1,muted:!1,volume:1},a.audio=Object(n.createRef)(),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(k.a.mark(function e(){var t,a,n,r,o,s,i,c,l;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.token,n=t.setSongs,r=t.setError,o="".concat(We,"/api/songs"),s={accept:"application/vnd.moosik.v1+json","content-type":"application/json",authorization:"Bearer ".concat(a)},e.prev=3,e.next=6,fetch(o,{method:"GET",headers:s}).then(function(e){return e.json()});case 6:if(i=e.sent,c=i.message,l=i.songs){e.next=11;break}throw new Error(c);case 11:n(l),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),r(e.t0.message);case 17:case"end":return e.stop()}},e,this,[[3,14]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(y.a)(k.a.mark(function e(t){var a,n,r,o,s,i;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props,n=a.songs,r=a.np,o=a.pause,s=this.state.song,n.length){e.next=4;break}return e.abrupt("return");case 4:if(t.np===r){e.next=8;break}return e.next=7,this.loadSong(n[r].uuid);case 7:return e.abrupt("return");case 8:if(t.pause===o){e.next=16;break}if(i=this.audio.current,!o){e.next=14;break}return i.pause(),document.title="Moosik",e.abrupt("return");case 14:i.play(),document.title="".concat(s.author," - ").concat(s.title);case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onLoadedMetadata",value:function(e){this.setState({duration:e.target.duration})}},{key:"onCanPlay",value:function(e){var t=this.props.setPause,a=this.state.song;e.target.play(),t(!1),document.title="".concat(a.author," - ").concat(a.title)}},{key:"onTimeUpdate",value:function(e){this.setState({currentTime:e.target.currentTime})}},{key:"onVolumeChange",value:function(e){this.setState({volume:e.target.volume})}},{key:"onEnded",value:function(){var e=this.props,t=e.songs,a=e.np,n=e.setNP;this.state.shuffle?n(Math.round(Math.random()*(t.length-1))):a<t.length-1&&n(a+1)}},{key:"onClickControl",value:function(e){var t=e.currentTarget.attributes["data-t"].nodeValue,a=this.props,n=a.songs,r=a.np,o=a.setNP,s=a.pause,i=a.setPause;switch(t){case"prev":r>0&&o(r-1);break;case"play":if(-1===r)return void o(-1===r?0:r);i(!s);break;case"next":r<n.length-1&&o(r+1);break;case"loop":this.setState(function(e){return{loop:!e.loop}});break;case"shuf":this.setState(function(e){return{shuffle:!e.shuffle}});break;case"mute":this.setState(function(e){return{muted:!e.muted}})}}},{key:"onClickVolumeSlider",value:function(e){var t=e.currentTarget.getBoundingClientRect();this.audio.current.volume=1-(e.clientY-t.top)/t.height}},{key:"loadSong",value:function(){var e=Object(y.a)(k.a.mark(function e(t){var a,n,r,o,s,i,c,l;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props,n=a.token,r=a.setError,o="".concat(We,"/api/songs/").concat(t),s={accept:"application/vnd.moosik.v1+json","content-type":"application/json",authorization:"Bearer ".concat(n)},e.prev=3,e.next=6,fetch(o,{method:"GET",headers:s}).then(function(e){return e.json()});case 6:if(i=e.sent,c=i.message,l=i.song){e.next=11;break}throw new Error(c);case 11:this.setState({song:l}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),r(e.t0.message);case 17:case"end":return e.stop()}},e,this,[[3,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.pause,t=this.state,a=t.song,n=t.currentTime,o=t.duration,s=t.muted,i=t.loop,c=t.volume,l=t.shuffle;return r.a.createElement("div",{className:Te.a.player},r.a.createElement("section",{className:Te.a.wrapper},r.a.createElement("div",{className:Te.a.controls},r.a.createElement("button",{type:"button",className:Te.a.control,"data-t":"prev",onClick:this.onClickControl.bind(this)},r.a.createElement("svg",{className:Te.a.icon},r.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"".concat(Be.a,"#prev")}))),r.a.createElement("button",{type:"button",className:Te.a.control,"data-t":"play",onClick:this.onClickControl.bind(this)},r.a.createElement("svg",{className:Te.a.icon},r.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"".concat(Be.a,"#").concat(e?"play":"pause")}))),r.a.createElement("button",{type:"button",className:Te.a.control,"data-t":"next",onClick:this.onClickControl.bind(this)},r.a.createElement("svg",{className:Te.a.icon},r.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"".concat(Be.a,"#next")}))),r.a.createElement("button",{type:"button",className:Te.a.control,"data-t":"loop",onClick:this.onClickControl.bind(this)},r.a.createElement("svg",{className:Te.a.icon},r.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"".concat(Be.a,"#repeat"),style:{fill:i?"var(--red-dark)":""}}))),r.a.createElement("button",{type:"button",className:Te.a.control,"data-t":"shuf",onClick:this.onClickControl.bind(this)},r.a.createElement("svg",{className:Te.a.icon},r.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"".concat(Be.a,"#shuffle"),style:{fill:l?"var(--red-dark)":""}})))),r.a.createElement(xe,{timePassed:n,duration:o||0}),r.a.createElement("div",{className:"".concat(Te.a.controls," ").concat(Te.a.volume)},r.a.createElement("button",{type:"button",className:Te.a.control,"data-t":"mute",onClick:this.onClickControl.bind(this)},r.a.createElement("svg",{className:Te.a.icon},r.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"".concat(Be.a,"#").concat(s?"mute":"volume")}))),r.a.createElement("div",{className:Te.a.volumeWrapper},r.a.createElement("div",{className:Te.a.volumeSlider,role:"presentation",onClick:this.onClickVolumeSlider.bind(this)},r.a.createElement("div",{className:Te.a.volumeBackground}),r.a.createElement("div",{className:Te.a.volumeBar,style:{height:"".concat(100*c,"%")}})))),r.a.createElement(Se,{author:a.author,title:a.title,cover:a.cover}),r.a.createElement("audio",{ref:this.audio,src:a.url,muted:s,loop:i,onLoadedMetadata:this.onLoadedMetadata.bind(this),onCanPlay:this.onCanPlay.bind(this),onTimeUpdate:this.onTimeUpdate.bind(this),onVolumeChange:this.onVolumeChange.bind(this),onEnded:this.onEnded.bind(this)})))}}]),t}(r.a.Component),Re=Object(i.b)(function(e){return{token:e.login.token,songs:e.player.songs,np:e.player.nowPlaying,pause:e.player.paused}},function(e){return{setSongs:function(t){return e(te(Z,t))},setNP:function(t){return e(te($,t))},setPause:function(t){return e(te(ee,t))},setError:function(t){return e(x(t))}}})(Ae),De=a(39),Le=a.n(De),Me=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.clearError;setTimeout(function(){e()},5e3)}},{key:"render",value:function(){var e=this.props.error;return r.a.createElement("div",{className:Le.a.modal},r.a.createElement("svg",{className:Le.a.icon,viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"})),r.a.createElement("div",{className:Le.a.message},r.a.createElement("span",null,e)))}}]),t}(r.a.Component),Ve=Object(i.b)(null,function(e){return{clearError:function(){return e(x(""))}}})(Me),He=a(40),ze=a.n(He),Fe=a(50),Xe=a.n(Fe),Ge=Object(i.b)(function(e){return{token:e.login.token,error:e.error.message}})(function(e){var t=e.token,a=e.error;return r.a.createElement("div",{className:ze.a.app,style:{backgroundImage:"url(".concat(Xe.a,")")}},r.a.createElement("main",{className:ze.a.container},r.a.createElement(c.a,null,r.a.createElement(b,null),r.a.createElement(Ee,null)),t&&r.a.createElement(Re,null)),r.a.createElement("div",{className:ze.a.modalWrapper},a&&r.a.createElement(Ve,{error:a})))}),Ke=a(30),qe=a(25),Je={token:window.localStorage.getItem("token")||""},Ye={songs:[],nowPlaying:-1,paused:!0},Qe={message:""},Ze=Object(Ke.b)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN":return Object(qe.a)({},e,{token:t.payload});default:return e}},player:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SONGS":return Object(qe.a)({},e,{songs:t.payload});case"SET_NP":return Object(qe.a)({},e,{nowPlaying:t.payload});case"SET_PAUSE":return Object(qe.a)({},e,{paused:t.payload});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR_MESSAGE":return Object(qe.a)({},e,{message:t.payload});default:return e}}}),$e=Object(Ke.c)(Ze);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(65);s.a.render(r.a.createElement(i.a,{store:$e},r.a.createElement(Ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[51,1,2]]]);
//# sourceMappingURL=main.c519c0f5.chunk.js.map