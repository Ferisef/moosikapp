(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,function(e,t,a){e.exports={player:"player_player__35Gch",wrapper:"player_wrapper__2pvXA",controls:"player_controls__yrmwU",control:"player_control__1GAJR",controlIcon:"player_controlIcon__2enCG",volume:"player_volume__3Swwg",volumeWrapper:"player_volumeWrapper__1fz4y",volumeSlider:"player_volumeSlider__1bdID",volumeBackground:"player_volumeBackground__1nr9H",volumeBar:"player_volumeBar__64T8Y"}},,,,,,function(e,t,a){e.exports={upload:"upload_upload__2gDVd",title:"upload_title__26joS",main:"upload_main__QlYCT",inputWrapper:"upload_inputWrapper__2faF0",input:"upload_input__3HSqz",submit:"upload_submit__3zk2_",file:"upload_file__HK228",fileInput:"upload_fileInput__3OG6N",note:"upload_note__1Kiz-",filename:"upload_filename__1sd5q",songEdit:"upload_songEdit__39Ayy"}},function(e,t,a){e.exports={track:"song_track__RX6bx",cover:"song_cover__1Z4fR",defaultCover:"song_defaultCover__1Scdp",button:"song_button__sSeHU",play:"song_play__3MQc2",playIcon:"song_playIcon__3QDC6",content:"song_content__TWzaj",actions:"song_actions__2A91g",actionIcon:"song_actionIcon__2Lse-",action:"song_action__Dd0CG",info:"song_info__jIaQd",title:"song_title__2OYyJ",author:"song_author__2GBdg"}},,,function(e,t,a){e.exports={register:"register_register__3K1Qz",title:"register_title__1qn8q",main:"register_main__wdjIV",inputWrapper:"register_inputWrapper__3hxjc",right:"register_right__6B6O5",input:"register_input__285Xz",submit:"register_submit__pfce4",link:"register_link__KC47u"}},,,,function(e,t,a){e.exports={login:"login_login__KNSyK",title:"login_title__2BrJb",main:"login_main__3gDUL",inputWrapper:"login_inputWrapper__PxK70",right:"login_right__2EU-W",input:"login_input__3Z4uP",submit:"login_submit__3z0zh",link:"login_link__QwjVM"}},,,function(e,t,a){e.exports={header:"header_header__3w3xx",inner:"header_inner__ueAE6",left:"header_left__oqI23",right:"header_right__2pdo2",logoLink:"header_logoLink__MRkg5",logo:"header_logo__2Sn9n",navWrapper:"header_navWrapper__32fBU",link:"header_link__3JPaZ"}},function(e,t,a){e.exports={forgot:"forgot_forgot__6N7KH",title:"forgot_title__3VwzE",main:"forgot_main__3wV8l",note:"forgot_note__1WMHf",inputWrapper:"forgot_inputWrapper__3NOri",right:"forgot_right__gOi91",input:"forgot_input__2hnXW",submit:"forgot_submit__mizzt"}},,,function(e,t,a){e.exports={soundBadge:"soundBadge_soundBadge__hUvOb",cover:"soundBadge_cover__3DUfa",titleContextContainer:"soundBadge_titleContextContainer__8tE46",title:"soundBadge_title__3Wt33",author:"soundBadge_author__2z1MH",truncate:"soundBadge_truncate__3U-6n"}},function(e,t,a){e.exports={status:"status_status__1dbQM",title:"status_title__2RHYm",body:"status_body__3W00t",item:"status_item__2fj3D"}},function(e,t,a){e.exports={timeline:"timeline_timeline__3ng4V",progressWrapper:"timeline_progressWrapper__2Mxxn",progressBackground:"timeline_progressBackground__VsvSl",progressBar:"timeline_progressBar__2sPc6",timePassed:"timeline_timePassed__pmNyr",duration:"timeline_duration__1I6eB"}},function(e,t,a){e.exports=a.p+"static/media/icons.174b8195.svg"},,,,function(e,t,a){e.exports=a.p+"static/media/icons.6b9d14e4.svg"},function(e,t,a){e.exports={app:"app_app__12nIj",background:"app_background__2Zzp2",container:"app_container__6cU4e",modalWrapper:"app_modalWrapper__pg4fn"}},,,,,function(e,t,a){e.exports={music:"music_music__2H0ii",title:"music_title__1Kqou",songList:"music_songList__1p17f"}},function(e,t,a){e.exports={modal:"modal_modal__1Zq7Y",icon:"modal_icon__1gGCi",message:"modal_message__1c0cU"}},,,,,,,,,function(e,t,a){e.exports={main:"main_main__3rTl_"}},function(e,t,a){e.exports=a.p+"static/media/bg.35f444d6.jpg"},function(e,t,a){e.exports=a(63)},,,,,,,,,,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(34),s=a.n(o),i=a(2),l=a(11),c=a(4),u=a(5),p=a(7),m=a(6),d=a(8),h=a(22),_=function(e){return{type:"SET_TOKEN",payload:e}},f=a(20),g=a.n(f),v=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"logout",value:function(){var e=this;return function(t){t.preventDefault();var a=e.props,n=a.setToken,r=a.history;n(""),window.localStorage.removeItem("token"),r.push("/login")}}},{key:"render",value:function(){var e=this.props.token;return r.a.createElement("header",{className:g.a.header},r.a.createElement("div",{className:g.a.inner},r.a.createElement("div",{className:g.a.left},r.a.createElement(l.b,{className:g.a.logoLink,to:"/"},r.a.createElement("svg",{className:g.a.logo,viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M12,1C7,1 3,5 3,10V17A3,3 0 0,0 6,20H9V12H5V10A7,7 0 0,1 12,3A7,7 0 0,1 19,10V12H15V20H18A3,3 0 0,0 21,17V10C21,5 16.97,1 12,1Z"}))),e&&r.a.createElement("nav",{className:g.a.navWrapper},r.a.createElement(l.b,{className:g.a.link,to:"/music"},"Music"),r.a.createElement(l.b,{className:g.a.link,to:"/upload"},"Upload"))),r.a.createElement("div",{className:g.a.right},!e&&r.a.createElement(l.b,{className:g.a.link,to:"/login"},"Login"),e&&r.a.createElement(l.b,{className:g.a.link,to:"?logout",onClick:this.logout()},"Logout"))))}}]),t}(r.a.Component),E=Object(i.b)(function(e){return{token:e.login.token}},function(e){return{setToken:function(t){return e(_(t))}}})(Object(h.e)(v)),b=a(36),y=a.n(b),k=function(e){return{type:"SET_ERROR_MESSAGE",payload:e}},N=a(25),w=a.n(N),j=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,O=void 0===j?"":j,P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={storage:null},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.updateStatus(),this.interval=setInterval(function(){return e.updateStatus()},3e5)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"updateStatus",value:function(){var e=this,t=this.props.setError;fetch("".concat(O,"/api/status"),{method:"GET",headers:{accept:"application/vnd.moosik.v1+json","content-type":"application/json"}}).then(function(e){return e.json()}).then(function(t){var a=t.storage;e.setState({storage:a})}).catch(function(e){t(e.toString())})}},{key:"render",value:function(){var e=this.state.storage;return r.a.createElement("section",{className:w.a.status},r.a.createElement("h1",{className:w.a.title},"Storage Status"),e&&r.a.createElement("div",{className:w.a.body},r.a.createElement("p",{className:w.a.item},"Total Space:\u2002",r.a.createElement("span",null,y()(e.totalSpace))),r.a.createElement("p",{className:w.a.item},"Used Space:\u2002",r.a.createElement("span",null,y()(e.usedSpace))),r.a.createElement("p",{className:w.a.item},"Max File Size:\u2002",r.a.createElement("span",null,y()(e.maxFileSize)))))}}]),t}(r.a.Component),S=Object(i.b)(null,function(e){return{setError:function(t){return e(k(t))}}})(P),x=a(12),C=a.n(x),I=a(17),T=a.n(I),W=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,B=void 0===W?"":W,U=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={username:"",password:""},a.uuids={username:C()(),password:C()()},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.token,a=e.history;return!t||(a.push("/"),!1)}},{key:"onInput",value:function(e){e.preventDefault();var t=this.uuids,a=t.username,n=t.password,r=e.target,o=r.id,s=r.value;switch(o){case a:this.setState({username:s});break;case n:this.setState({password:s})}}},{key:"login",value:function(e){e.preventDefault();var t=this.props,a=t.setToken,n=t.history,r=t.setError,o=this.state,s=o.username,i=o.password;fetch("".concat(B,"/api/login"),{method:"POST",headers:{accept:"application/vnd.moosik.v1+json","content-type":"application/json"},body:JSON.stringify({username:s,password:i})}).then(function(e){return e.json()}).then(function(e){var t=e.token,o=e.message;t?(a(t),window.localStorage.setItem("token",t),n.push("/")):r(o)}).catch(function(e){r(e.toString())})}},{key:"render",value:function(){var e=this.uuids;return r.a.createElement("section",{className:T.a.login},r.a.createElement("h1",{className:T.a.title},"Login"),r.a.createElement("form",{className:T.a.main},r.a.createElement("label",{htmlFor:e.username,className:T.a.inputWrapper},r.a.createElement("input",{id:e.username,className:T.a.input,type:"text",placeholder:"Username / Email",onChange:this.onInput.bind(this)})),r.a.createElement("label",{htmlFor:e.password,className:T.a.inputWrapper},r.a.createElement("input",{id:e.password,className:T.a.input,type:"password",placeholder:"Password",onChange:this.onInput.bind(this)})),r.a.createElement("div",{className:T.a.inputWrapper},r.a.createElement(l.b,{className:T.a.link,to:"/forgot"},"Forgot your password?"),r.a.createElement("div",{className:T.a.right},r.a.createElement(l.b,{className:T.a.link,to:"/register"},"Need an account?"),r.a.createElement("input",{className:T.a.submit,type:"submit",value:"Login",onClick:this.login.bind(this)})))))}}]),t}(r.a.Component),A=Object(i.b)(function(e){return{token:e.login.token}},function(e){return{setToken:function(t){return e(_(t))},setError:function(t){return e(k(t))}}})(Object(h.e)(U)),D=a(13),R=a.n(D),L=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,M=void 0===L?"":L,H=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={username:"",email:"",password:"",retry:""},a.uuids={username:C()(),email:C()(),password:C()(),retry:C()()},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.token,a=e.history;return!t||(a.push("/"),!1)}},{key:"onInput",value:function(e){e.preventDefault();var t=this.uuids,a=t.username,n=t.email,r=t.password,o=t.retry,s=e.target,i=s.id,l=s.value;switch(i){case a:this.setState({username:l});break;case n:this.setState({email:l});break;case r:this.setState({password:l});break;case o:this.setState({retry:l})}}},{key:"register",value:function(e){e.preventDefault();var t=this.props,a=t.history,n=t.setError,r=this.state,o=r.username,s=r.email,i=r.password,l=r.retry;/[a-zA-Z0-9\-_]/.test(o)?/^\w+[\w-.]*@\w+((-\w+)|(\w*))\.[a-z]{2,3}$/.test(s)?i.length<8?n("Password too short. Use 8 or more characters."):i===l?fetch("".concat(M,"/api/register"),{method:"POST",headers:{accept:"application/vnd.moosik.v1+json","content-type":"application/json"},body:JSON.stringify({username:o,email:s,password:i})}).then(function(e){return e.json()}).then(function(e){var t=e.uuid,r=e.message;t?a.push("/login"):n(r)}).catch(function(e){n(e.toString())}):n("Passwords don't match."):n("Invalid email."):n("Username must contain only English characters, numbers, dot, dash or underline.")}},{key:"render",value:function(){var e=this.uuids;return r.a.createElement("section",{className:R.a.register},r.a.createElement("h1",{className:R.a.title},"Register"),r.a.createElement("form",{className:R.a.body},r.a.createElement("label",{htmlFor:e.username,className:R.a.inputWrapper},r.a.createElement("input",{ref:this.username,id:e.username,className:R.a.input,type:"text",placeholder:"Username",onChange:this.onInput.bind(this)})),r.a.createElement("label",{htmlFor:e.email,className:R.a.inputWrapper},r.a.createElement("input",{ref:this.email,id:e.email,className:R.a.input,type:"email",placeholder:"Email",onChange:this.onInput.bind(this)})),r.a.createElement("label",{htmlFor:e.password,className:R.a.inputWrapper},r.a.createElement("input",{ref:this.password,id:e.password,className:R.a.input,type:"password",placeholder:"Password",onChange:this.onInput.bind(this)})),r.a.createElement("label",{htmlFor:e.retry,className:R.a.inputWrapper},r.a.createElement("input",{ref:this.retry,id:e.retry,className:R.a.input,type:"password",placeholder:"Re-type Password",onChange:this.onInput.bind(this)})),r.a.createElement("div",{className:R.a.inputWrapper},r.a.createElement(l.b,{className:R.a.link,to:"/login"},"Already have account?"),r.a.createElement("input",{className:R.a.submit,type:"submit",value:"Register",onClick:this.register.bind(this)}))))}}]),t}(r.a.Component),V=Object(i.b)(function(e){return{token:e.login.token}},function(e){return{setError:function(t){return e(k(t))}}})(Object(h.e)(H)),z=a(21),F=a.n(z),G=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,X=void 0===G?"":G,q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={email:""},a.uuids={email:C()()},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.token,a=e.history;return!t||(a.push("/"),!1)}},{key:"onInput",value:function(e){e.preventDefault(),this.setState({email:e.target.value})}},{key:"requestPasswordChange",value:function(e){e.preventDefault();var t=this.props.setError,a=this.state.email;/^\w+[\w-.]*@\w+((-\w+)|(\w*))\.[a-z]{2,3}$/.test(a)?fetch("".concat(X,"/api/forgot"),{method:"POST",headers:{accept:"application/vnd.moosik.v1+json","content-type":"application/json"},body:JSON.stringify({email:a})}).then(function(e){return e.json()}).then(function(e){t(e.message)}).catch(function(e){t(e.toString())}):t("Invalid email.")}},{key:"render",value:function(){var e=this.uuids;return r.a.createElement("section",{className:F.a.forgot},r.a.createElement("h1",{className:F.a.title},"Forgot"),r.a.createElement("form",{className:F.a.main},r.a.createElement("div",{className:F.a.note},r.a.createElement("p",null,"To request a new password please enter your account email in the box below."),r.a.createElement("p",null,"We will send you an email with further instructions.")),r.a.createElement("label",{htmlFor:e.email,className:F.a.inputWrapper},r.a.createElement("input",{ref:this.email,id:e.email,className:F.a.input,type:"email",placeholder:"Email",onChange:this.onInput.bind(this)})),r.a.createElement("div",{className:F.a.inputWrapper},r.a.createElement("input",{className:F.a.submit,type:"submit",value:"Request Password Change",onClick:this.requestPasswordChange.bind(this)}))))}}]),t}(r.a.Component),K=Object(i.b)(function(e){return{token:e.login.token}},function(e){return{setError:function(t){return e(k(t))}}})(Object(h.e)(q)),J="SET_SONGS",Y="SET_NP",Z="SET_PAUSE",Q=function(e,t){return{type:e,payload:t}},$=a(10),ee=a.n($),te=a(31),ae=a.n(te),ne=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"onClick",value:function(){var e=this.props,t=e.i,a=e.np,n=e.setNP,r=e.pause,o=e.setPause;t!==a?n(t):o(!r)}},{key:"render",value:function(){var e=this.props,t=e.author,a=e.title,n=e.cover,o=e.edit,s=e.i,i=e.np,l=e.pause,c="".concat(ae.a,"#").concat(s!==i||l?"play":"pause");return r.a.createElement("div",{className:ee.a.track},r.a.createElement("div",{className:ee.a.cover,style:{backgroundImage:"url(".concat(n,")")}},!n&&r.a.createElement("svg",{className:ee.a.defaultCover},r.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"".concat(ae.a,"#cover")})),r.a.createElement("button",{className:"".concat(ee.a.button," ").concat(ee.a.play),type:"button",onClick:this.onClick.bind(this)},r.a.createElement("svg",{className:ee.a.playIcon},r.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:c})))),r.a.createElement("div",{className:ee.a.content},r.a.createElement("div",{className:ee.a.title},a),r.a.createElement("div",{className:ee.a.author},t)),r.a.createElement("div",{className:ee.a.actions},r.a.createElement("button",{className:"".concat(ee.a.button," ").concat(ee.a.action),type:"button"},r.a.createElement("svg",{className:ee.a.actionIcon},r.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"".concat(ae.a,"#like")}))),o&&r.a.createElement("button",{className:"".concat(ee.a.button," ").concat(ee.a.action),type:"button"},r.a.createElement("svg",{className:ee.a.actionIcon},r.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"".concat(ae.a,"#edit")})))))}}]),t}(r.a.Component);ne.defaultProps={cover:null,edit:!1};var re=Object(i.b)(function(e){return{np:e.player.nowPlaying,pause:e.player.paused}},function(e){return{setNP:function(t){return e(Q(Y,t))},setPause:function(t){return e(Q(Z,t))}}})(ne),oe=a(37),se=a.n(oe),ie=Object(i.b)(function(e){return{songs:e.player.songs}})(function(e){var t=e.songs;return r.a.createElement("section",{className:se.a.music},r.a.createElement("h1",{className:se.a.title},"All"),r.a.createElement("div",{className:se.a.songList},t.map(function(e,t){return r.a.createElement(re,{key:e.uuid,author:e.author,title:e.title,cover:e.cover,i:t})})))}),le=a(9),ce=a.n(le),ue=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,pe=void 0===ue?"":ue,me=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={file:null,artist:"",title:"",name:""},a.uuids={file:C()(),artist:C()(),title:C()(),cover:C()()},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.token,a=e.history;return!!t||(a.push("/"),!1)}},{key:"onInput",value:function(e){e.preventDefault();var t=this.uuids,a=t.file,n=t.artist,r=t.title,o=e.target,s=o.id,i=o.value,l=o.files;switch(s){case a:if(0===l.length)return;var c=l[0].name;this.setState({name:c}),this.setState({file:l[0]});break;case n:this.setState({artist:i});break;case r:this.setState({title:i})}}},{key:"onDrop",value:function(e){if(e.preventDefault(),e.dataTransfer.files){var t=e.dataTransfer.files[0];this.setState({file:t,name:t.name})}}},{key:"upload",value:function(e){e.preventDefault();var t=this.props,a=t.token,n=t.setError,r=this.state,o=r.file,s=r.artist,i=r.title;o.size>10485760?n("File too large. Your audio file may not exceed 10 MB."):"audio/mp3"===o.type?fetch("".concat(pe,"/api/songs"),{method:"PUT",headers:{accept:"application/vnd.moosik.v1+json","content-type":"audio/mpeg",authorization:"Bearer ".concat(a),"x-uploaded-filename":s&&i?"".concat(s," - ").concat(i):o.name},body:o}).then(function(e){return e.json()}).then(function(e){var t=e.uuid,a=e.message;n(a)}).catch(function(e){n(e.toString())}):n("Unsupported type. Your audio file has to be in MP3 format.")}},{key:"render",value:function(){var e=this.state.name,t=this.uuids;return r.a.createElement("section",{className:ce.a.upload,onDrop:this.onDrop.bind(this),onDragOver:function(e){return e.preventDefault()}},r.a.createElement("h1",{className:ce.a.title},"Drag and drop your track here"),r.a.createElement("form",{className:ce.a.main},r.a.createElement("div",{className:ce.a.inputWrapper},r.a.createElement("label",{className:ce.a.file,htmlFor:t.file},r.a.createElement("input",{className:ce.a.fileInput,id:t.file,type:"file",accept:"audio/mpeg",onChange:this.onInput.bind(this)}),r.a.createElement("span",null,"or choose file to upload"))),e&&r.a.createElement("p",{className:ce.a.filename},e),r.a.createElement("div",{className:ce.a.note},r.a.createElement("p",null,"Your audio file may not exceed 10 MB and has to be in MP3 format.")),r.a.createElement("div",{className:ce.a.songEdit},r.a.createElement("label",{htmlFor:t.artist,className:ce.a.inputWrapper},r.a.createElement("input",{id:t.artist,className:ce.a.input,type:"text",placeholder:"Artist",onChange:this.onInput.bind(this)})),r.a.createElement("label",{htmlFor:t.title,className:ce.a.inputWrapper},r.a.createElement("input",{id:t.title,className:ce.a.input,type:"text",placeholder:"Title",onChange:this.onInput.bind(this)})),r.a.createElement("label",{htmlFor:t.cover,className:ce.a.inputWrapper},r.a.createElement("input",{id:t.cover,className:ce.a.input,type:"text",placeholder:"Cover",onChange:this.onInput.bind(this)}))),r.a.createElement("div",{className:ce.a.inputWrapper},r.a.createElement("input",{className:ce.a.submit,type:"submit",value:"Upload",onClick:this.upload.bind(this)}))))}}]),t}(r.a.Component),de=Object(i.b)(function(e){return{token:e.login.token}},function(e){return{setError:function(t){return e(k(t))}}})(Object(h.e)(me)),he=[{path:"/",component:function(){return r.a.createElement(S,null)},exact:!0},{path:"/music",component:function(){return r.a.createElement(ie,null)}},{path:"/upload",component:function(){return r.a.createElement(de,null)}},{path:"/login",component:function(){return r.a.createElement(A,null)}},{path:"/register",component:function(){return r.a.createElement(V,null)}},{path:"/forgot",component:function(){return r.a.createElement(K,null)}}],_e=a(47),fe=a.n(_e),ge=function(){return r.a.createElement("div",{className:fe.a.main},he.map(function(e){return r.a.createElement(h.a,{key:e.path.slice(1),path:e.path,component:e.component,exact:e.exact})}))},ve=a(43),Ee=a.n(ve),be=a(26),ye=a.n(be),ke=function(e){var t=e.timePassed,a=e.duration;return r.a.createElement("div",{className:ye.a.timeline},r.a.createElement("div",{className:ye.a.timePassed},Ee()(1e3*t).format("mm:ss")),r.a.createElement("div",{className:ye.a.progressWrapper},r.a.createElement("div",{className:ye.a.progressBackground},r.a.createElement("div",{className:ye.a.progressBar,style:{width:"".concat(t/a*100,"%")}}))),r.a.createElement("div",{className:ye.a.duration},Ee()(1e3*a).format("mm:ss")))},Ne=a(24),we=a.n(Ne),je=function(e){var t=e.author,a=e.title,n=e.cover;return r.a.createElement("div",{className:we.a.soundBadge},r.a.createElement("div",{className:we.a.cover,style:{backgroundImage:"url(".concat(n,")")}}),r.a.createElement("div",{className:we.a.titleContextContainer},r.a.createElement("span",{className:"".concat(we.a.title," ").concat(we.a.truncate)},a),r.a.createElement("span",{className:"".concat(we.a.author," ").concat(we.a.truncate)},t)))};je.defaultProps={author:"No Author",title:"No Title",cover:""};var Oe=je,Pe=a(3),Se=a.n(Pe),xe=a(27),Ce=a.n(xe),Ie=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL,Te=void 0===Ie?"":Ie,We=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={song:{},currentTime:0,duration:0,loop:!1,shuffle:!1,muted:!1,volume:1},a.audio=Object(n.createRef)(),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.token,a=e.setSongs,n=e.setError;fetch("".concat(Te,"/api/songs"),{method:"GET",headers:{accept:"application/vnd.moosik.v1+json","content-type":"application/json",authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).then(function(e){var t=e.message,r=e.songs;r?a(r):n(t)}).catch(function(e){n(e.toString())})}},{key:"componentDidUpdate",value:function(e){var t=this,a=this.props,n=a.token,r=a.songs,o=a.nowPlaying,s=a.paused,i=a.setError;if(r.length)if(e.nowPlaying===o){if(e.paused!==s){var l=this.audio.current;s?l.pause():l.play()}}else fetch("".concat(Te,"/api/songs/").concat(r[o].uuid),{method:"GET",headers:{accept:"application/vnd.moosik.v1+json","content-type":"application/json",authorization:"Bearer ".concat(n)}}).then(function(e){return e.json()}).then(function(e){var a=e.message,n=e.song;n?t.setState({song:n}):i(a)}).catch(function(e){i(e.toString())})}},{key:"prev",value:function(){var e=this.props,t=e.nowPlaying,a=e.setNowPlaying;t>0&&a(t-1)}},{key:"play",value:function(){var e=this.props,t=e.nowPlaying,a=e.setNowPlaying,n=e.paused,r=e.setPause;-1!==t?r(!n):a(-1===t?0:t)}},{key:"next",value:function(){var e=this.props,t=e.songs,a=e.nowPlaying,n=e.setNowPlaying;a<t.length-1&&n(a+1)}},{key:"repeat",value:function(){this.setState(function(e){return{loop:!e.loop}})}},{key:"shuffle",value:function(){this.setState(function(e){return{shuffle:!e.shuffle}})}},{key:"mute",value:function(){this.setState(function(e){return{muted:!e.muted}})}},{key:"changeVolume",value:function(e){var t=e.target;t.classList.contains(Se.a.volumeBar)&&(t=t.parentNode);var a=t.getBoundingClientRect(),n=1-(e.clientY-a.top)/a.height;n<0||n>1||(this.audio.current.volume=n)}},{key:"update",value:function(e){var t=this.props.setPause,a=e.target,n=a.paused,r=a.currentTime,o=a.duration,s=a.volume;this.setState({currentTime:r,duration:o,volume:s}),t(n)}},{key:"ended",value:function(){var e=this.props,t=e.songs,a=e.nowPlaying,n=e.setNowPlaying;this.state.shuffle?n(Math.round(Math.random()*(t.length-1))):a<t.length-1&&n(a+1)}},{key:"render",value:function(){var e=this.props.paused,t=this.state,a=t.song,n=t.currentTime,o=t.duration,s=t.muted,i=t.loop,l=t.volume,c=t.shuffle;return r.a.createElement("div",{className:Se.a.player},r.a.createElement("section",{className:Se.a.wrapper},r.a.createElement("div",{className:Se.a.controls},r.a.createElement("button",{type:"button",className:Se.a.control,onClick:this.prev.bind(this)},r.a.createElement("svg",{className:Se.a.controlIcon},r.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"".concat(Ce.a,"#prev")}))),r.a.createElement("button",{type:"button",className:Se.a.control,onClick:this.play.bind(this)},r.a.createElement("svg",{className:Se.a.controlIcon},r.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"".concat(Ce.a,"#").concat(e?"play":"pause")}))),r.a.createElement("button",{type:"button",className:Se.a.control,onClick:this.next.bind(this)},r.a.createElement("svg",{className:Se.a.controlIcon},r.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"".concat(Ce.a,"#next")}))),r.a.createElement("button",{type:"button",className:Se.a.control,onClick:this.repeat.bind(this)},r.a.createElement("svg",{className:Se.a.controlIcon},r.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"".concat(Ce.a,"#repeat"),style:{fill:i?"var(--red-dark)":""}}))),r.a.createElement("button",{type:"button",className:Se.a.control,onClick:this.shuffle.bind(this)},r.a.createElement("svg",{className:Se.a.controlIcon},r.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"".concat(Ce.a,"#shuffle"),style:{fill:c?"var(--red-dark)":""}})))),r.a.createElement(ke,{timePassed:n,duration:o||0}),r.a.createElement("div",{className:"".concat(Se.a.controls," ").concat(Se.a.volume)},r.a.createElement("button",{type:"button",className:Se.a.control,onClick:this.mute.bind(this)},r.a.createElement("svg",{className:Se.a.controlIcon},r.a.createElement("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:"".concat(Ce.a,"#").concat(s?"mute":"volume")}))),r.a.createElement("div",{className:Se.a.volumeWrapper},r.a.createElement("div",{className:Se.a.volumeSlider,role:"presentation",onClick:this.changeVolume.bind(this)},r.a.createElement("div",{className:Se.a.volumeBackground}),r.a.createElement("div",{className:Se.a.volumeBar,style:{height:"".concat(100*l,"%")}})))),r.a.createElement(Oe,{author:a.author,title:a.title,cover:a.cover}),r.a.createElement("audio",{ref:this.audio,autoPlay:!0,src:a.url,muted:s,loop:i,onCanPlay:this.update.bind(this),onEnded:this.ended.bind(this),onTimeUpdate:this.update.bind(this),onVolumeChange:this.update.bind(this)})))}}]),t}(r.a.Component),Be=Object(i.b)(function(e){return{token:e.login.token,songs:e.player.songs,nowPlaying:e.player.nowPlaying,paused:e.player.paused}},function(e){return{setSongs:function(t){return e(Q(J,t))},setNowPlaying:function(t){return e(Q(Y,t))},setPause:function(t){return e(Q(Z,t))},setError:function(t){return e(k(t))}}})(We),Ue=a(38),Ae=a.n(Ue),De=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.clearError;setTimeout(function(){e()},5e3)}},{key:"render",value:function(){var e=this.props.error;return r.a.createElement("div",{className:Ae.a.modal},r.a.createElement("svg",{className:Ae.a.icon,viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"})),r.a.createElement("div",{className:Ae.a.message},r.a.createElement("span",null,e)))}}]),t}(r.a.Component),Re=Object(i.b)(null,function(e){return{clearError:function(){return e(k(""))}}})(De),Le=a(32),Me=a.n(Le),He=a(48),Ve=a.n(He),ze=Object(i.b)(function(e){return{token:e.login.token,error:e.error.message}})(function(e){var t=e.token,a=e.error;return r.a.createElement("div",{className:Me.a.app},r.a.createElement("div",{className:Me.a.background,style:{backgroundImage:"url(".concat(Ve.a,")")}}),r.a.createElement("main",{className:Me.a.container},r.a.createElement(l.a,null,r.a.createElement(E,null),r.a.createElement(ge,null)),t&&r.a.createElement(Be,null)),r.a.createElement("div",{className:Me.a.modalWrapper},a&&r.a.createElement(Re,{error:a})))}),Fe=a(28),Ge=a(23),Xe={token:window.localStorage.getItem("token")||""},qe={songs:[],nowPlaying:-1,paused:!0},Ke={message:""},Je=Object(Fe.b)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN":return Object(Ge.a)({},e,{token:t.payload});default:return e}},player:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SONGS":return Object(Ge.a)({},e,{songs:t.payload});case"SET_NP":return Object(Ge.a)({},e,{nowPlaying:t.payload});case"SET_PAUSE":return Object(Ge.a)({},e,{paused:t.payload});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR_MESSAGE":return Object(Ge.a)({},e,{message:t.payload});default:return e}}}),Ye=Object(Fe.c)(Je);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(62);s.a.render(r.a.createElement(i.a,{store:Ye},r.a.createElement(ze,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[49,1,2]]]);
//# sourceMappingURL=main.2ad7628c.chunk.js.map